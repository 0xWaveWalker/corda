buildscript {
    repositories {
        mavenCentral()
        maven {
            url 'http://oss.sonatype.org/content/repositories/snapshots'
        }
    }
    dependencies {
        classpath "org.jetbrains.kotlin:kotlin-gradle-plugin:$kotlin_version"
    }
}

apply plugin: 'java'
apply plugin: 'kotlin'
apply plugin: 'application'
apply plugin: 'us.kirchmeier.capsule'

group 'com.r3cev.prototyping'
version '1.0-SNAPSHOT'

sourceCompatibility = 1.5

repositories {
    mavenLocal()
    mavenCentral()
    maven {
        url 'http://oss.sonatype.org/content/repositories/snapshots'
    }
    jcenter()
}

applicationDefaultJvmArgs = ["-javaagent:${rootProject.configurations.quasar.singleFile}"]
mainClassName = 'com.r3cev.corda.netmap.NetworkMapVisualiserKt'

dependencies {
    compile project(":core")
    compile project(":node")
    compile project(":contracts")
    compile rootProject

    // GraphStream: For visualisation
    compile "org.graphstream:gs-core:1.3"
    compile "org.graphstream:gs-ui:1.3"

    compile "org.jetbrains.kotlin:kotlin-stdlib:$kotlin_version"
    testCompile group: 'junit', name: 'junit', version: '4.11'
}

task capsule(type: FatCapsule) {
    applicationClass 'com.r3cev.corda.netmap.NetworkExplorerKt'
    reallyExecutable
    capsuleManifest {
        minJavaVersion = '1.8.0'
        javaAgents = [rootProject.configurations.quasar.singleFile.name]
    }
}
