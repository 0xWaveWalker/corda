<HTML>
<HEAD>
<title>TransactionBuilder - </title>
<link rel="stylesheet" href="../../style.css">
</HEAD>
<BODY>
<a href="../index.html">core</a>&nbsp;/&nbsp;<a href=".">TransactionBuilder</a><br/>
<br/>
<h1>TransactionBuilder</h1>
<code><span class="keyword">class </span><span class="identifier">TransactionBuilder</span></code><br/>
<p>A TransactionBuilder is a transaction class thats mutable (unlike the others which are all immutable). It is
intended to be passed around contracts that may edit it by adding new states/commands or modifying the existing set.
Then once the states and commands are right, this class can be used as a holding bucket to gather signatures from
multiple parties.</p>
<br/>
<br/>
<h3>Constructors</h3>
<table>
<tbody>
<tr>
<td>
<a href="-init-.html">&lt;init&gt;</a></td>
<td>
<code><span class="identifier">TransactionBuilder</span><span class="symbol">(</span><span class="identifier" id="core.contracts.TransactionBuilder$<init>(kotlin.collections.MutableList((core.contracts.StateRef)), kotlin.collections.MutableList((core.crypto.SecureHash)), kotlin.collections.MutableList((core.contracts.ContractState)), kotlin.collections.MutableList((core.contracts.Command)))/inputs">inputs</span><span class="symbol">:</span>&nbsp;<span class="identifier">MutableList</span><span class="symbol">&lt;</span><a href="../-state-ref/index.html"><span class="identifier">StateRef</span></a><span class="symbol">&gt;</span>&nbsp;<span class="symbol">=</span>&nbsp;arrayListOf()<span class="symbol">, </span><span class="identifier" id="core.contracts.TransactionBuilder$<init>(kotlin.collections.MutableList((core.contracts.StateRef)), kotlin.collections.MutableList((core.crypto.SecureHash)), kotlin.collections.MutableList((core.contracts.ContractState)), kotlin.collections.MutableList((core.contracts.Command)))/attachments">attachments</span><span class="symbol">:</span>&nbsp;<span class="identifier">MutableList</span><span class="symbol">&lt;</span><a href="../../core.crypto/-secure-hash/index.html"><span class="identifier">SecureHash</span></a><span class="symbol">&gt;</span>&nbsp;<span class="symbol">=</span>&nbsp;arrayListOf()<span class="symbol">, </span><span class="identifier" id="core.contracts.TransactionBuilder$<init>(kotlin.collections.MutableList((core.contracts.StateRef)), kotlin.collections.MutableList((core.crypto.SecureHash)), kotlin.collections.MutableList((core.contracts.ContractState)), kotlin.collections.MutableList((core.contracts.Command)))/outputs">outputs</span><span class="symbol">:</span>&nbsp;<span class="identifier">MutableList</span><span class="symbol">&lt;</span><a href="../-contract-state/index.html"><span class="identifier">ContractState</span></a><span class="symbol">&gt;</span>&nbsp;<span class="symbol">=</span>&nbsp;arrayListOf()<span class="symbol">, </span><span class="identifier" id="core.contracts.TransactionBuilder$<init>(kotlin.collections.MutableList((core.contracts.StateRef)), kotlin.collections.MutableList((core.crypto.SecureHash)), kotlin.collections.MutableList((core.contracts.ContractState)), kotlin.collections.MutableList((core.contracts.Command)))/commands">commands</span><span class="symbol">:</span>&nbsp;<span class="identifier">MutableList</span><span class="symbol">&lt;</span><a href="../-command/index.html"><span class="identifier">Command</span></a><span class="symbol">&gt;</span>&nbsp;<span class="symbol">=</span>&nbsp;arrayListOf()<span class="symbol">)</span></code><p>A TransactionBuilder is a transaction class thats mutable (unlike the others which are all immutable). It is
intended to be passed around contracts that may edit it by adding new states/commands or modifying the existing set.
Then once the states and commands are right, this class can be used as a holding bucket to gather signatures from
multiple parties.</p>
</td>
</tr>
</tbody>
</table>
<h3>Properties</h3>
<table>
<tbody>
<tr>
<td>
<a href="time.html">time</a></td>
<td>
<code><span class="keyword">val </span><span class="identifier">time</span><span class="symbol">: </span><a href="../-timestamp-command/index.html"><span class="identifier">TimestampCommand</span></a><span class="symbol">?</span></code></td>
</tr>
</tbody>
</table>
<h3>Functions</h3>
<table>
<tbody>
<tr>
<td>
<a href="add-attachment.html">addAttachment</a></td>
<td>
<code><span class="keyword">fun </span><span class="identifier">addAttachment</span><span class="symbol">(</span><span class="identifier" id="core.contracts.TransactionBuilder$addAttachment(core.contracts.Attachment)/attachment">attachment</span><span class="symbol">:</span>&nbsp;<a href="../-attachment/index.html"><span class="identifier">Attachment</span></a><span class="symbol">)</span><span class="symbol">: </span><span class="identifier">Unit</span></code></td>
</tr>
<tr>
<td>
<a href="add-command.html">addCommand</a></td>
<td>
<code><span class="keyword">fun </span><span class="identifier">addCommand</span><span class="symbol">(</span><span class="identifier" id="core.contracts.TransactionBuilder$addCommand(core.contracts.Command)/arg">arg</span><span class="symbol">:</span>&nbsp;<a href="../-command/index.html"><span class="identifier">Command</span></a><span class="symbol">)</span><span class="symbol">: </span><span class="identifier">Unit</span></code><br/>
<code><span class="keyword">fun </span><span class="identifier">addCommand</span><span class="symbol">(</span><span class="identifier" id="core.contracts.TransactionBuilder$addCommand(core.contracts.CommandData, kotlin.Array((java.security.PublicKey)))/data">data</span><span class="symbol">:</span>&nbsp;<a href="../-command-data.html"><span class="identifier">CommandData</span></a><span class="symbol">, </span><span class="keyword">vararg</span> <span class="identifier" id="core.contracts.TransactionBuilder$addCommand(core.contracts.CommandData, kotlin.Array((java.security.PublicKey)))/keys">keys</span><span class="symbol">:</span>&nbsp;<a href="http://docs.oracle.com/javase/6/docs/api/java/security/PublicKey.html"><span class="identifier">PublicKey</span></a><span class="symbol">)</span><span class="symbol">: </span><span class="identifier">&lt;ERROR CLASS&gt;</span></code><br/>
<code><span class="keyword">fun </span><span class="identifier">addCommand</span><span class="symbol">(</span><span class="identifier" id="core.contracts.TransactionBuilder$addCommand(core.contracts.CommandData, kotlin.collections.List((java.security.PublicKey)))/data">data</span><span class="symbol">:</span>&nbsp;<a href="../-command-data.html"><span class="identifier">CommandData</span></a><span class="symbol">, </span><span class="identifier" id="core.contracts.TransactionBuilder$addCommand(core.contracts.CommandData, kotlin.collections.List((java.security.PublicKey)))/keys">keys</span><span class="symbol">:</span>&nbsp;<span class="identifier">List</span><span class="symbol">&lt;</span><a href="http://docs.oracle.com/javase/6/docs/api/java/security/PublicKey.html"><span class="identifier">PublicKey</span></a><span class="symbol">&gt;</span><span class="symbol">)</span><span class="symbol">: </span><span class="identifier">Unit</span></code></td>
</tr>
<tr>
<td>
<a href="add-input-state.html">addInputState</a></td>
<td>
<code><span class="keyword">fun </span><span class="identifier">addInputState</span><span class="symbol">(</span><span class="identifier" id="core.contracts.TransactionBuilder$addInputState(core.contracts.StateRef)/ref">ref</span><span class="symbol">:</span>&nbsp;<a href="../-state-ref/index.html"><span class="identifier">StateRef</span></a><span class="symbol">)</span><span class="symbol">: </span><span class="identifier">Unit</span></code></td>
</tr>
<tr>
<td>
<a href="add-output-state.html">addOutputState</a></td>
<td>
<code><span class="keyword">fun </span><span class="identifier">addOutputState</span><span class="symbol">(</span><span class="identifier" id="core.contracts.TransactionBuilder$addOutputState(core.contracts.ContractState)/state">state</span><span class="symbol">:</span>&nbsp;<a href="../-contract-state/index.html"><span class="identifier">ContractState</span></a><span class="symbol">)</span><span class="symbol">: </span><span class="identifier">Unit</span></code></td>
</tr>
<tr>
<td>
<a href="add-signature-unchecked.html">addSignatureUnchecked</a></td>
<td>
<code><span class="keyword">fun </span><span class="identifier">addSignatureUnchecked</span><span class="symbol">(</span><span class="identifier" id="core.contracts.TransactionBuilder$addSignatureUnchecked(core.crypto.DigitalSignature.WithKey)/sig">sig</span><span class="symbol">:</span>&nbsp;<a href="../../core.crypto/-digital-signature/-with-key/index.html"><span class="identifier">WithKey</span></a><span class="symbol">)</span><span class="symbol">: </span><span class="identifier">Unit</span></code><p>Adds the signature directly to the transaction, without checking it for validity.</p>
</td>
</tr>
<tr>
<td>
<a href="attachments.html">attachments</a></td>
<td>
<code><span class="keyword">fun </span><span class="identifier">attachments</span><span class="symbol">(</span><span class="symbol">)</span><span class="symbol">: </span><span class="identifier">List</span><span class="symbol">&lt;</span><a href="../../core.crypto/-secure-hash/index.html"><span class="identifier">SecureHash</span></a><span class="symbol">&gt;</span></code></td>
</tr>
<tr>
<td>
<a href="check-and-add-signature.html">checkAndAddSignature</a></td>
<td>
<code><span class="keyword">fun </span><span class="identifier">checkAndAddSignature</span><span class="symbol">(</span><span class="identifier" id="core.contracts.TransactionBuilder$checkAndAddSignature(core.crypto.DigitalSignature.WithKey)/sig">sig</span><span class="symbol">:</span>&nbsp;<a href="../../core.crypto/-digital-signature/-with-key/index.html"><span class="identifier">WithKey</span></a><span class="symbol">)</span><span class="symbol">: </span><span class="identifier">Unit</span></code><p>Checks that the given signature matches one of the commands and that it is a correct signature over the tx, then
adds it.</p>
</td>
</tr>
<tr>
<td>
<a href="check-signature.html">checkSignature</a></td>
<td>
<code><span class="keyword">fun </span><span class="identifier">checkSignature</span><span class="symbol">(</span><span class="identifier" id="core.contracts.TransactionBuilder$checkSignature(core.crypto.DigitalSignature.WithKey)/sig">sig</span><span class="symbol">:</span>&nbsp;<a href="../../core.crypto/-digital-signature/-with-key/index.html"><span class="identifier">WithKey</span></a><span class="symbol">)</span><span class="symbol">: </span><span class="identifier">Unit</span></code><p>Checks that the given signature matches one of the commands and that it is a correct signature over the tx.</p>
</td>
</tr>
<tr>
<td>
<a href="commands.html">commands</a></td>
<td>
<code><span class="keyword">fun </span><span class="identifier">commands</span><span class="symbol">(</span><span class="symbol">)</span><span class="symbol">: </span><span class="identifier">List</span><span class="symbol">&lt;</span><a href="../-command/index.html"><span class="identifier">Command</span></a><span class="symbol">&gt;</span></code></td>
</tr>
<tr>
<td>
<a href="input-states.html">inputStates</a></td>
<td>
<code><span class="keyword">fun </span><span class="identifier">inputStates</span><span class="symbol">(</span><span class="symbol">)</span><span class="symbol">: </span><span class="identifier">List</span><span class="symbol">&lt;</span><a href="../-state-ref/index.html"><span class="identifier">StateRef</span></a><span class="symbol">&gt;</span></code></td>
</tr>
<tr>
<td>
<a href="output-states.html">outputStates</a></td>
<td>
<code><span class="keyword">fun </span><span class="identifier">outputStates</span><span class="symbol">(</span><span class="symbol">)</span><span class="symbol">: </span><span class="identifier">List</span><span class="symbol">&lt;</span><a href="../-contract-state/index.html"><span class="identifier">ContractState</span></a><span class="symbol">&gt;</span></code></td>
</tr>
<tr>
<td>
<a href="set-time.html">setTime</a></td>
<td>
<code><span class="keyword">fun </span><span class="identifier">setTime</span><span class="symbol">(</span><span class="identifier" id="core.contracts.TransactionBuilder$setTime(java.time.Instant, core.crypto.Party, java.time.Duration)/time">time</span><span class="symbol">:</span>&nbsp;<a href="http://docs.oracle.com/javase/6/docs/api/java/time/Instant.html"><span class="identifier">Instant</span></a><span class="symbol">, </span><span class="identifier" id="core.contracts.TransactionBuilder$setTime(java.time.Instant, core.crypto.Party, java.time.Duration)/authenticatedBy">authenticatedBy</span><span class="symbol">:</span>&nbsp;<a href="../-party/index.html"><span class="identifier">Party</span></a><span class="symbol">, </span><span class="identifier" id="core.contracts.TransactionBuilder$setTime(java.time.Instant, core.crypto.Party, java.time.Duration)/timeTolerance">timeTolerance</span><span class="symbol">:</span>&nbsp;<a href="http://docs.oracle.com/javase/6/docs/api/java/time/Duration.html"><span class="identifier">Duration</span></a><span class="symbol">)</span><span class="symbol">: </span><span class="identifier">Unit</span></code><p>Places a <a href="../-timestamp-command/index.html">TimestampCommand</a> in this transaction, removing any existing command if there is one.
To get the right signature from the timestamping service, use the <a href="timestamp.html">timestamp</a> method after building is
finished, or run use the <a href="#">TimestampingProtocol</a> yourself.</p>
</td>
</tr>
<tr>
<td>
<a href="sign-with.html">signWith</a></td>
<td>
<code><span class="keyword">fun </span><span class="identifier">signWith</span><span class="symbol">(</span><span class="identifier" id="core.contracts.TransactionBuilder$signWith(java.security.KeyPair)/key">key</span><span class="symbol">:</span>&nbsp;<a href="http://docs.oracle.com/javase/6/docs/api/java/security/KeyPair.html"><span class="identifier">KeyPair</span></a><span class="symbol">)</span><span class="symbol">: </span><span class="identifier">Unit</span></code></td>
</tr>
<tr>
<td>
<a href="timestamp.html">timestamp</a></td>
<td>
<code><span class="keyword">fun </span><span class="identifier">timestamp</span><span class="symbol">(</span><span class="identifier" id="core.contracts.TransactionBuilder$timestamp(core.node.services.TimestamperService, java.time.Clock)/timestamper">timestamper</span><span class="symbol">:</span>&nbsp;<a href="../../core.node.services/-timestamper-service/index.html"><span class="identifier">TimestamperService</span></a><span class="symbol">, </span><span class="identifier" id="core.contracts.TransactionBuilder$timestamp(core.node.services.TimestamperService, java.time.Clock)/clock">clock</span><span class="symbol">:</span>&nbsp;<a href="http://docs.oracle.com/javase/6/docs/api/java/time/Clock.html"><span class="identifier">Clock</span></a>&nbsp;<span class="symbol">=</span>&nbsp;Clock.systemUTC()<span class="symbol">)</span><span class="symbol">: </span><span class="identifier">Unit</span></code><p>Uses the given timestamper service to request a signature over the WireTransaction be added. There must always be
at least one such signature, but others may be added as well. You may want to have multiple redundant timestamps
in the following cases:</p>
</td>
</tr>
<tr>
<td>
<a href="to-signed-transaction.html">toSignedTransaction</a></td>
<td>
<code><span class="keyword">fun </span><span class="identifier">toSignedTransaction</span><span class="symbol">(</span><span class="identifier" id="core.contracts.TransactionBuilder$toSignedTransaction(kotlin.Boolean)/checkSufficientSignatures">checkSufficientSignatures</span><span class="symbol">:</span>&nbsp;<span class="identifier">Boolean</span>&nbsp;<span class="symbol">=</span>&nbsp;true<span class="symbol">)</span><span class="symbol">: </span><a href="../-signed-transaction/index.html"><span class="identifier">SignedTransaction</span></a></code></td>
</tr>
<tr>
<td>
<a href="to-wire-transaction.html">toWireTransaction</a></td>
<td>
<code><span class="keyword">fun </span><span class="identifier">toWireTransaction</span><span class="symbol">(</span><span class="symbol">)</span><span class="symbol">: </span><a href="../-wire-transaction/index.html"><span class="identifier">WireTransaction</span></a></code></td>
</tr>
<tr>
<td>
<a href="with-items.html">withItems</a></td>
<td>
<code><span class="keyword">fun </span><span class="identifier">withItems</span><span class="symbol">(</span><span class="keyword">vararg</span> <span class="identifier" id="core.contracts.TransactionBuilder$withItems(kotlin.Array((kotlin.Any)))/items">items</span><span class="symbol">:</span>&nbsp;<span class="identifier">Any</span><span class="symbol">)</span><span class="symbol">: </span><span class="identifier">TransactionBuilder</span></code><p>A more convenient way to add items to this transaction that calls the add* methods for you based on type</p>
</td>
</tr>
</tbody>
</table>
</BODY>
</HTML>
