<HTML>
<HEAD>
<title>TwoPartyDealProtocol.Secondary - </title>
<link rel="stylesheet" href="../../../style.css">
</HEAD>
<BODY>
<a href="../../index.html">com.r3corda.protocols</a>&nbsp;/&nbsp;<a href="../index.html">TwoPartyDealProtocol</a>&nbsp;/&nbsp;<a href=".">Secondary</a><br/>
<br/>
<h1>Secondary</h1>
<code><span class="keyword">abstract</span> <span class="keyword">class </span><span class="identifier">Secondary</span><span class="symbol">&lt;</span><span class="identifier">U</span><span class="symbol">&gt;</span>&nbsp;<span class="symbol">:</span>&nbsp;<a href="../../../com.r3corda.core.protocols/-protocol-logic/index.html"><span class="identifier">ProtocolLogic</span></a><span class="symbol">&lt;</span><a href="../../../com.r3corda.core.transactions/-signed-transaction/index.html"><span class="identifier">SignedTransaction</span></a><span class="symbol">&gt;</span></code><br/>
<p>Abstracted bilateral deal protocol participant that is recipient of initial communication.</p>
<p>Theres a good chance we can push at least some of this logic down into core protocol logic
and helper methods etc.</p>
<br/>
<br/>
<br/>
<br/>
<h3>Types</h3>
<table>
<tbody>
<tr>
<td>
<a href="-r-e-c-e-i-v-i-n-g.html">RECEIVING</a></td>
<td>
<code><span class="keyword">object </span><span class="identifier">RECEIVING</span>&nbsp;<span class="symbol">:</span>&nbsp;<a href="../../../com.r3corda.core.utilities/-progress-tracker/-step/index.html"><span class="identifier">Step</span></a></code></td>
</tr>
<tr>
<td>
<a href="-r-e-c-o-r-d-i-n-g.html">RECORDING</a></td>
<td>
<code><span class="keyword">object </span><span class="identifier">RECORDING</span>&nbsp;<span class="symbol">:</span>&nbsp;<a href="../../../com.r3corda.core.utilities/-progress-tracker/-step/index.html"><span class="identifier">Step</span></a></code></td>
</tr>
<tr>
<td>
<a href="-s-i-g-n-i-n-g.html">SIGNING</a></td>
<td>
<code><span class="keyword">object </span><span class="identifier">SIGNING</span>&nbsp;<span class="symbol">:</span>&nbsp;<a href="../../../com.r3corda.core.utilities/-progress-tracker/-step/index.html"><span class="identifier">Step</span></a></code></td>
</tr>
<tr>
<td>
<a href="-s-w-a-p-p-i-n-g_-s-i-g-n-a-t-u-r-e-s.html">SWAPPING_SIGNATURES</a></td>
<td>
<code><span class="keyword">object </span><span class="identifier">SWAPPING_SIGNATURES</span>&nbsp;<span class="symbol">:</span>&nbsp;<a href="../../../com.r3corda.core.utilities/-progress-tracker/-step/index.html"><span class="identifier">Step</span></a></code></td>
</tr>
<tr>
<td>
<a href="-v-e-r-i-f-y-i-n-g.html">VERIFYING</a></td>
<td>
<code><span class="keyword">object </span><span class="identifier">VERIFYING</span>&nbsp;<span class="symbol">:</span>&nbsp;<a href="../../../com.r3corda.core.utilities/-progress-tracker/-step/index.html"><span class="identifier">Step</span></a></code></td>
</tr>
</tbody>
</table>
<h3>Constructors</h3>
<table>
<tbody>
<tr>
<td>
<a href="-init-.html">&lt;init&gt;</a></td>
<td>
<code><span class="identifier">Secondary</span><span class="symbol">(</span><span class="identifier" id="com.r3corda.protocols.TwoPartyDealProtocol.Secondary$<init>(com.r3corda.core.utilities.ProgressTracker)/progressTracker">progressTracker</span><span class="symbol">:</span>&nbsp;<a href="../../../com.r3corda.core.utilities/-progress-tracker/index.html"><span class="identifier">ProgressTracker</span></a>&nbsp;<span class="symbol">=</span>&nbsp;Secondary.tracker()<span class="symbol">)</span></code><p>Abstracted bilateral deal protocol participant that is recipient of initial communication.</p>
</td>
</tr>
</tbody>
</table>
<h3>Properties</h3>
<table>
<tbody>
<tr>
<td>
<a href="other-party.html">otherParty</a></td>
<td>
<code><span class="keyword">abstract</span> <span class="keyword">val </span><span class="identifier">otherParty</span><span class="symbol">: </span><a href="../../../com.r3corda.core.crypto/-party/index.html"><span class="identifier">Party</span></a></code></td>
</tr>
<tr>
<td>
<a href="progress-tracker.html">progressTracker</a></td>
<td>
<code><span class="keyword">open</span> <span class="keyword">val </span><span class="identifier">progressTracker</span><span class="symbol">: </span><a href="../../../com.r3corda.core.utilities/-progress-tracker/index.html"><span class="identifier">ProgressTracker</span></a></code><p>Override this to provide a <a href="../../../com.r3corda.core.utilities/-progress-tracker/index.html">ProgressTracker</a>. If one is provided and stepped, the framework will do something
helpful with the progress reports. If this protocol is invoked as a sub-protocol of another, then the
tracker will be made a child of the current step in the parent. If its null, this protocol doesnt track
progress.</p>
</td>
</tr>
<tr>
<td>
<a href="topic.html">topic</a></td>
<td>
<code><span class="keyword">open</span> <span class="keyword">val </span><span class="identifier">topic</span><span class="symbol">: </span><span class="identifier">String</span></code><p>The topic to use when communicating with other parties. If more than one topic is required then use sub-protocols.
Note that this is temporary until protocol sessions are properly implemented.</p>
</td>
</tr>
</tbody>
</table>
<h3>Inherited Properties</h3>
<table>
<tbody>
<tr>
<td>
<a href="../../../com.r3corda.core.protocols/-protocol-logic/logger.html">logger</a></td>
<td>
<code><span class="keyword">val </span><span class="identifier">logger</span><span class="symbol">: </span><span class="identifier">&lt;ERROR CLASS&gt;</span></code><p>This is where you should log things to.</p>
</td>
</tr>
<tr>
<td>
<a href="../../../com.r3corda.core.protocols/-protocol-logic/psm.html">psm</a></td>
<td>
<code><span class="keyword">lateinit</span> <span class="keyword">var </span><span class="identifier">psm</span><span class="symbol">: </span><a href="../../../com.r3corda.core.protocols/-protocol-state-machine/index.html"><span class="identifier">ProtocolStateMachine</span></a><span class="symbol">&lt;</span><span class="identifier">*</span><span class="symbol">&gt;</span></code><p>Reference to the <a href="#">Fiber</a> instance that is the top level controller for the entire flow.</p>
</td>
</tr>
<tr>
<td>
<a href="../../../com.r3corda.core.protocols/-protocol-logic/service-hub.html">serviceHub</a></td>
<td>
<code><span class="keyword">val </span><span class="identifier">serviceHub</span><span class="symbol">: </span><a href="../../../com.r3corda.core.node/-service-hub/index.html"><span class="identifier">ServiceHub</span></a></code><p>Provides access to big, heavy classes that may be reconstructed from time to time, e.g. across restarts. It is
only available once the protocol has started, which means it cannnot be accessed in the constructor. Either
access this lazily or from inside <a href="../../../com.r3corda.core.protocols/-protocol-logic/call.html">call</a>.</p>
</td>
</tr>
</tbody>
</table>
<h3>Functions</h3>
<table>
<tbody>
<tr>
<td>
<a href="assemble-shared-t-x.html">assembleSharedTX</a></td>
<td>
<code><span class="keyword">abstract</span> <span class="keyword">fun </span><span class="identifier">assembleSharedTX</span><span class="symbol">(</span><span class="identifier" id="com.r3corda.protocols.TwoPartyDealProtocol.Secondary$assembleSharedTX(com.r3corda.protocols.TwoPartyDealProtocol.Handshake((com.r3corda.protocols.TwoPartyDealProtocol.Secondary.U)))/handshake">handshake</span><span class="symbol">:</span>&nbsp;<a href="../-handshake/index.html"><span class="identifier">Handshake</span></a><span class="symbol">&lt;</span><span class="identifier">U</span><span class="symbol">&gt;</span><span class="symbol">)</span><span class="symbol">: </span><span class="identifier">&lt;ERROR CLASS&gt;</span><span class="symbol">&lt;</span><a href="../../../com.r3corda.core.transactions/-transaction-builder/index.html"><span class="identifier">TransactionBuilder</span></a><span class="symbol">,</span>&nbsp;<span class="identifier">List</span><span class="symbol">&lt;</span><a href="http://docs.oracle.com/javase/6/docs/api/java/security/PublicKey.html"><span class="identifier">PublicKey</span></a><span class="symbol">&gt;</span><span class="symbol">&gt;</span></code></td>
</tr>
<tr>
<td>
<a href="call.html">call</a></td>
<td>
<code><span class="keyword">open</span> <span class="keyword">fun </span><span class="identifier">call</span><span class="symbol">(</span><span class="symbol">)</span><span class="symbol">: </span><a href="../../../com.r3corda.core.transactions/-signed-transaction/index.html"><span class="identifier">SignedTransaction</span></a></code><p>This is where you fill out your business logic.</p>
</td>
</tr>
<tr>
<td>
<a href="validate-handshake.html">validateHandshake</a></td>
<td>
<code><span class="keyword">abstract</span> <span class="keyword">fun </span><span class="identifier">validateHandshake</span><span class="symbol">(</span><span class="identifier" id="com.r3corda.protocols.TwoPartyDealProtocol.Secondary$validateHandshake(com.r3corda.protocols.TwoPartyDealProtocol.Handshake((com.r3corda.protocols.TwoPartyDealProtocol.Secondary.U)))/handshake">handshake</span><span class="symbol">:</span>&nbsp;<a href="../-handshake/index.html"><span class="identifier">Handshake</span></a><span class="symbol">&lt;</span><span class="identifier">U</span><span class="symbol">&gt;</span><span class="symbol">)</span><span class="symbol">: </span><a href="../-handshake/index.html"><span class="identifier">Handshake</span></a><span class="symbol">&lt;</span><span class="identifier">U</span><span class="symbol">&gt;</span></code></td>
</tr>
</tbody>
</table>
<h3>Inherited Functions</h3>
<table>
<tbody>
<tr>
<td>
<a href="../../../com.r3corda.core.protocols/-protocol-logic/receive.html">receive</a></td>
<td>
<code><span class="keyword">fun </span><span class="symbol">&lt;</span><span class="identifier">T</span>&nbsp;<span class="symbol">:</span>&nbsp;<span class="identifier">Any</span><span class="symbol">&gt;</span> <span class="identifier">receive</span><span class="symbol">(</span><span class="identifier" id="com.r3corda.core.protocols.ProtocolLogic$receive(com.r3corda.core.crypto.Party)/otherParty">otherParty</span><span class="symbol">:</span>&nbsp;<a href="../../../com.r3corda.core.crypto/-party/index.html"><span class="identifier">Party</span></a><span class="symbol">)</span><span class="symbol">: </span><a href="../../../com.r3corda.core.utilities/-untrustworthy-data/index.html"><span class="identifier">UntrustworthyData</span></a><span class="symbol">&lt;</span><span class="identifier">T</span><span class="symbol">&gt;</span></code><br/>
<code><span class="keyword">fun </span><span class="symbol">&lt;</span><span class="identifier">T</span>&nbsp;<span class="symbol">:</span>&nbsp;<span class="identifier">Any</span><span class="symbol">&gt;</span> <span class="identifier">receive</span><span class="symbol">(</span><span class="identifier" id="com.r3corda.core.protocols.ProtocolLogic$receive(com.r3corda.core.crypto.Party, java.lang.Class((com.r3corda.core.protocols.ProtocolLogic.receive.T)))/otherParty">otherParty</span><span class="symbol">:</span>&nbsp;<a href="../../../com.r3corda.core.crypto/-party/index.html"><span class="identifier">Party</span></a><span class="symbol">, </span><span class="identifier" id="com.r3corda.core.protocols.ProtocolLogic$receive(com.r3corda.core.crypto.Party, java.lang.Class((com.r3corda.core.protocols.ProtocolLogic.receive.T)))/receiveType">receiveType</span><span class="symbol">:</span>&nbsp;<a href="http://docs.oracle.com/javase/6/docs/api/java/lang/Class.html"><span class="identifier">Class</span></a><span class="symbol">&lt;</span><span class="identifier">T</span><span class="symbol">&gt;</span><span class="symbol">)</span><span class="symbol">: </span><a href="../../../com.r3corda.core.utilities/-untrustworthy-data/index.html"><span class="identifier">UntrustworthyData</span></a><span class="symbol">&lt;</span><span class="identifier">T</span><span class="symbol">&gt;</span></code></td>
</tr>
<tr>
<td>
<a href="../../../com.r3corda.core.protocols/-protocol-logic/register-session.html">registerSession</a></td>
<td>
<code><span class="keyword">fun </span><span class="identifier">registerSession</span><span class="symbol">(</span><span class="identifier" id="com.r3corda.core.protocols.ProtocolLogic$registerSession(com.r3corda.protocols.HandshakeMessage)/receivedHandshake">receivedHandshake</span><span class="symbol">:</span>&nbsp;<a href="../../-handshake-message/index.html"><span class="identifier">HandshakeMessage</span></a><span class="symbol">)</span><span class="symbol">: </span><span class="identifier">Unit</span></code><p>If a node receives a <a href="../../-handshake-message/index.html">HandshakeMessage</a> it needs to call this method on the initiated receipt protocol to enable
communication between it and the sender protocol. Calling this method, and other initiation steps, are already
handled by AbstractNodeService.addProtocolHandler.</p>
</td>
</tr>
<tr>
<td>
<a href="../../../com.r3corda.core.protocols/-protocol-logic/send.html">send</a></td>
<td>
<code><span class="keyword">fun </span><span class="identifier">send</span><span class="symbol">(</span><span class="identifier" id="com.r3corda.core.protocols.ProtocolLogic$send(com.r3corda.core.crypto.Party, kotlin.Any)/otherParty">otherParty</span><span class="symbol">:</span>&nbsp;<a href="../../../com.r3corda.core.crypto/-party/index.html"><span class="identifier">Party</span></a><span class="symbol">, </span><span class="identifier" id="com.r3corda.core.protocols.ProtocolLogic$send(com.r3corda.core.crypto.Party, kotlin.Any)/payload">payload</span><span class="symbol">:</span>&nbsp;<span class="identifier">Any</span><span class="symbol">)</span><span class="symbol">: </span><span class="identifier">Unit</span></code></td>
</tr>
<tr>
<td>
<a href="../../../com.r3corda.core.protocols/-protocol-logic/send-and-receive.html">sendAndReceive</a></td>
<td>
<code><span class="keyword">fun </span><span class="symbol">&lt;</span><span class="identifier">T</span>&nbsp;<span class="symbol">:</span>&nbsp;<span class="identifier">Any</span><span class="symbol">&gt;</span> <span class="identifier">sendAndReceive</span><span class="symbol">(</span><span class="identifier" id="com.r3corda.core.protocols.ProtocolLogic$sendAndReceive(com.r3corda.core.crypto.Party, kotlin.Any)/otherParty">otherParty</span><span class="symbol">:</span>&nbsp;<a href="../../../com.r3corda.core.crypto/-party/index.html"><span class="identifier">Party</span></a><span class="symbol">, </span><span class="identifier" id="com.r3corda.core.protocols.ProtocolLogic$sendAndReceive(com.r3corda.core.crypto.Party, kotlin.Any)/payload">payload</span><span class="symbol">:</span>&nbsp;<span class="identifier">Any</span><span class="symbol">)</span><span class="symbol">: </span><a href="../../../com.r3corda.core.utilities/-untrustworthy-data/index.html"><span class="identifier">UntrustworthyData</span></a><span class="symbol">&lt;</span><span class="identifier">T</span><span class="symbol">&gt;</span></code><br/>
<code><span class="keyword">fun </span><span class="symbol">&lt;</span><span class="identifier">T</span>&nbsp;<span class="symbol">:</span>&nbsp;<span class="identifier">Any</span><span class="symbol">&gt;</span> <span class="identifier">sendAndReceive</span><span class="symbol">(</span><span class="identifier" id="com.r3corda.core.protocols.ProtocolLogic$sendAndReceive(com.r3corda.core.crypto.Party, kotlin.Any, java.lang.Class((com.r3corda.core.protocols.ProtocolLogic.sendAndReceive.T)))/otherParty">otherParty</span><span class="symbol">:</span>&nbsp;<a href="../../../com.r3corda.core.crypto/-party/index.html"><span class="identifier">Party</span></a><span class="symbol">, </span><span class="identifier" id="com.r3corda.core.protocols.ProtocolLogic$sendAndReceive(com.r3corda.core.crypto.Party, kotlin.Any, java.lang.Class((com.r3corda.core.protocols.ProtocolLogic.sendAndReceive.T)))/payload">payload</span><span class="symbol">:</span>&nbsp;<span class="identifier">Any</span><span class="symbol">, </span><span class="identifier" id="com.r3corda.core.protocols.ProtocolLogic$sendAndReceive(com.r3corda.core.crypto.Party, kotlin.Any, java.lang.Class((com.r3corda.core.protocols.ProtocolLogic.sendAndReceive.T)))/receiveType">receiveType</span><span class="symbol">:</span>&nbsp;<a href="http://docs.oracle.com/javase/6/docs/api/java/lang/Class.html"><span class="identifier">Class</span></a><span class="symbol">&lt;</span><span class="identifier">T</span><span class="symbol">&gt;</span><span class="symbol">)</span><span class="symbol">: </span><a href="../../../com.r3corda.core.utilities/-untrustworthy-data/index.html"><span class="identifier">UntrustworthyData</span></a><span class="symbol">&lt;</span><span class="identifier">T</span><span class="symbol">&gt;</span></code></td>
</tr>
<tr>
<td>
<a href="../../../com.r3corda.core.protocols/-protocol-logic/sub-protocol.html">subProtocol</a></td>
<td>
<code><span class="keyword">fun </span><span class="symbol">&lt;</span><span class="identifier">R</span><span class="symbol">&gt;</span> <span class="identifier">subProtocol</span><span class="symbol">(</span><span class="identifier" id="com.r3corda.core.protocols.ProtocolLogic$subProtocol(com.r3corda.core.protocols.ProtocolLogic((com.r3corda.core.protocols.ProtocolLogic.subProtocol.R)), kotlin.Boolean)/subLogic">subLogic</span><span class="symbol">:</span>&nbsp;<a href="../../../com.r3corda.core.protocols/-protocol-logic/index.html"><span class="identifier">ProtocolLogic</span></a><span class="symbol">&lt;</span><span class="identifier">R</span><span class="symbol">&gt;</span><span class="symbol">, </span><span class="identifier" id="com.r3corda.core.protocols.ProtocolLogic$subProtocol(com.r3corda.core.protocols.ProtocolLogic((com.r3corda.core.protocols.ProtocolLogic.subProtocol.R)), kotlin.Boolean)/inheritParentSessions">inheritParentSessions</span><span class="symbol">:</span>&nbsp;<span class="identifier">Boolean</span>&nbsp;<span class="symbol">=</span>&nbsp;false<span class="symbol">)</span><span class="symbol">: </span><span class="identifier">R</span></code><p>Invokes the given subprotocol by simply passing through this <a href="../../../com.r3corda.core.protocols/-protocol-logic/index.html">ProtocolLogic</a>s reference to the
<a href="../../../com.r3corda.core.protocols/-protocol-state-machine/index.html">ProtocolStateMachine</a> and then calling the <a href="../../../com.r3corda.core.protocols/-protocol-logic/call.html">call</a> method.</p>
</td>
</tr>
</tbody>
</table>
<h3>Companion Object Functions</h3>
<table>
<tbody>
<tr>
<td>
<a href="tracker.html">tracker</a></td>
<td>
<code><span class="keyword">fun </span><span class="identifier">tracker</span><span class="symbol">(</span><span class="symbol">)</span><span class="symbol">: </span><a href="../../../com.r3corda.core.utilities/-progress-tracker/index.html"><span class="identifier">ProgressTracker</span></a></code></td>
</tr>
</tbody>
</table>
<h3>Inheritors</h3>
<table>
<tbody>
<tr>
<td>
<a href="../-acceptor/index.html">Acceptor</a></td>
<td>
<code><span class="keyword">class </span><span class="identifier">Acceptor</span><span class="symbol">&lt;</span><span class="identifier">T</span>&nbsp;<span class="symbol">:</span>&nbsp;<a href="../../../com.r3corda.core.contracts/-deal-state/index.html"><span class="identifier">DealState</span></a><span class="symbol">&gt;</span>&nbsp;<span class="symbol">:</span>&nbsp;<span class="identifier">Secondary</span><span class="symbol">&lt;</span><span class="identifier">T</span><span class="symbol">&gt;</span></code><p>One side of the protocol for inserting a pre-agreed deal.</p>
</td>
</tr>
<tr>
<td>
<a href="../-fixer/index.html">Fixer</a></td>
<td>
<code><span class="keyword">class </span><span class="identifier">Fixer</span>&nbsp;<span class="symbol">:</span>&nbsp;<span class="identifier">Secondary</span><span class="symbol">&lt;</span><a href="../../../com.r3corda.core.contracts/-state-ref/index.html"><span class="identifier">StateRef</span></a><span class="symbol">&gt;</span></code><p>One side of the fixing protocol for an interest rate swap, but could easily be generalised further.</p>
</td>
</tr>
</tbody>
</table>
</BODY>
</HTML>
