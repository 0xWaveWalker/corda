<HTML>
<HEAD>
<title>NetworkMapCache - </title>
<link rel="stylesheet" href="../../style.css">
</HEAD>
<BODY>
<a href="../index.html">core.node.subsystems</a>&nbsp;/&nbsp;<a href=".">NetworkMapCache</a><br/>
<br/>
<h1>NetworkMapCache</h1>
<code><span class="keyword">interface </span><span class="identifier">NetworkMapCache</span></code><br/>
<p>A network map contains lists of nodes on the network along with information about their identity keys, services
they provide and host names or IP addresses where they can be connected to. The cache wraps around a map fetched
from an authoritative service, and adds easy lookup of the data stored within it. Generally it would be initialised
with a specified network map service, which it fetches data from and then subscribes to updates of.</p>
<br/>
<br/>
<h3>Properties</h3>
<table>
<tbody>
<tr>
<td>
<a href="network-map-nodes.html">networkMapNodes</a></td>
<td>
<code><span class="keyword">abstract</span> <span class="keyword">val </span><span class="identifier">networkMapNodes</span><span class="symbol">: </span><span class="identifier">List</span><span class="symbol">&lt;</span><a href="../../core.node/-node-info/index.html"><span class="identifier">NodeInfo</span></a><span class="symbol">&gt;</span></code><p>A list of nodes that advertise a network map service</p>
</td>
</tr>
<tr>
<td>
<a href="party-nodes.html">partyNodes</a></td>
<td>
<code><span class="keyword">abstract</span> <span class="keyword">val </span><span class="identifier">partyNodes</span><span class="symbol">: </span><span class="identifier">List</span><span class="symbol">&lt;</span><a href="../../core.node/-node-info/index.html"><span class="identifier">NodeInfo</span></a><span class="symbol">&gt;</span></code><p>A list of all nodes the cache is aware of</p>
</td>
</tr>
<tr>
<td>
<a href="rates-oracle-nodes.html">ratesOracleNodes</a></td>
<td>
<code><span class="keyword">abstract</span> <span class="keyword">val </span><span class="identifier">ratesOracleNodes</span><span class="symbol">: </span><span class="identifier">List</span><span class="symbol">&lt;</span><a href="../../core.node/-node-info/index.html"><span class="identifier">NodeInfo</span></a><span class="symbol">&gt;</span></code><p>A list of nodes that advertise a rates oracle service</p>
</td>
</tr>
<tr>
<td>
<a href="regulators.html">regulators</a></td>
<td>
<code><span class="keyword">abstract</span> <span class="keyword">val </span><span class="identifier">regulators</span><span class="symbol">: </span><span class="identifier">List</span><span class="symbol">&lt;</span><a href="../../core.node/-node-info/index.html"><span class="identifier">NodeInfo</span></a><span class="symbol">&gt;</span></code><p>A list of nodes that advertise a regulatory service. Identifying the correct regulator for a trade is outwith
the scope of the network map service, and this is intended solely as a sanity check on configuration stored
elsewhere.</p>
</td>
</tr>
<tr>
<td>
<a href="timestamping-nodes.html">timestampingNodes</a></td>
<td>
<code><span class="keyword">abstract</span> <span class="keyword">val </span><span class="identifier">timestampingNodes</span><span class="symbol">: </span><span class="identifier">List</span><span class="symbol">&lt;</span><a href="../../core.node/-node-info/index.html"><span class="identifier">NodeInfo</span></a><span class="symbol">&gt;</span></code><p>A list of nodes that advertise a timestamping service</p>
</td>
</tr>
</tbody>
</table>
<h3>Functions</h3>
<table>
<tbody>
<tr>
<td>
<a href="add-map-service.html">addMapService</a></td>
<td>
<code><span class="keyword">abstract</span> <span class="keyword">fun </span><span class="identifier">addMapService</span><span class="symbol">(</span><span class="identifier" id="core.node.subsystems.NetworkMapCache$addMapService(core.messaging.StateMachineManager, core.messaging.MessagingService, core.node.NodeInfo, kotlin.Boolean, kotlin.Int)/smm">smm</span><span class="symbol">:</span>&nbsp;<a href="../../core.messaging/-state-machine-manager/index.html"><span class="identifier">StateMachineManager</span></a><span class="symbol">, </span><span class="identifier" id="core.node.subsystems.NetworkMapCache$addMapService(core.messaging.StateMachineManager, core.messaging.MessagingService, core.node.NodeInfo, kotlin.Boolean, kotlin.Int)/net">net</span><span class="symbol">:</span>&nbsp;<a href="../../core.messaging/-messaging-service/index.html"><span class="identifier">MessagingService</span></a><span class="symbol">, </span><span class="identifier" id="core.node.subsystems.NetworkMapCache$addMapService(core.messaging.StateMachineManager, core.messaging.MessagingService, core.node.NodeInfo, kotlin.Boolean, kotlin.Int)/service">service</span><span class="symbol">:</span>&nbsp;<a href="../../core.node/-node-info/index.html"><span class="identifier">NodeInfo</span></a><span class="symbol">, </span><span class="identifier" id="core.node.subsystems.NetworkMapCache$addMapService(core.messaging.StateMachineManager, core.messaging.MessagingService, core.node.NodeInfo, kotlin.Boolean, kotlin.Int)/subscribe">subscribe</span><span class="symbol">:</span>&nbsp;<span class="identifier">Boolean</span><span class="symbol">, </span><span class="identifier" id="core.node.subsystems.NetworkMapCache$addMapService(core.messaging.StateMachineManager, core.messaging.MessagingService, core.node.NodeInfo, kotlin.Boolean, kotlin.Int)/ifChangedSinceVer">ifChangedSinceVer</span><span class="symbol">:</span>&nbsp;<span class="identifier">Int</span><span class="symbol">?</span>&nbsp;<span class="symbol">=</span>&nbsp;null<span class="symbol">)</span><span class="symbol">: </span><span class="identifier">&lt;ERROR CLASS&gt;</span><span class="symbol">&lt;</span><span class="identifier">Unit</span><span class="symbol">&gt;</span></code><p>Add a network map service; fetches a copy of the latest map from the service and subscribes to any further
updates.</p>
</td>
</tr>
<tr>
<td>
<a href="add-node.html">addNode</a></td>
<td>
<code><span class="keyword">abstract</span> <span class="keyword">fun </span><span class="identifier">addNode</span><span class="symbol">(</span><span class="identifier" id="core.node.subsystems.NetworkMapCache$addNode(core.node.NodeInfo)/node">node</span><span class="symbol">:</span>&nbsp;<a href="../../core.node/-node-info/index.html"><span class="identifier">NodeInfo</span></a><span class="symbol">)</span><span class="symbol">: </span><span class="identifier">Unit</span></code><p>Adds a node to the local cache (generally only used for adding ourselves)</p>
</td>
</tr>
<tr>
<td>
<a href="deregister-for-updates.html">deregisterForUpdates</a></td>
<td>
<code><span class="keyword">abstract</span> <span class="keyword">fun </span><span class="identifier">deregisterForUpdates</span><span class="symbol">(</span><span class="identifier" id="core.node.subsystems.NetworkMapCache$deregisterForUpdates(core.messaging.StateMachineManager, core.messaging.MessagingService, core.node.NodeInfo)/smm">smm</span><span class="symbol">:</span>&nbsp;<a href="../../core.messaging/-state-machine-manager/index.html"><span class="identifier">StateMachineManager</span></a><span class="symbol">, </span><span class="identifier" id="core.node.subsystems.NetworkMapCache$deregisterForUpdates(core.messaging.StateMachineManager, core.messaging.MessagingService, core.node.NodeInfo)/net">net</span><span class="symbol">:</span>&nbsp;<a href="../../core.messaging/-messaging-service/index.html"><span class="identifier">MessagingService</span></a><span class="symbol">, </span><span class="identifier" id="core.node.subsystems.NetworkMapCache$deregisterForUpdates(core.messaging.StateMachineManager, core.messaging.MessagingService, core.node.NodeInfo)/service">service</span><span class="symbol">:</span>&nbsp;<a href="../../core.node/-node-info/index.html"><span class="identifier">NodeInfo</span></a><span class="symbol">)</span><span class="symbol">: </span><span class="identifier">&lt;ERROR CLASS&gt;</span><span class="symbol">&lt;</span><span class="identifier">Unit</span><span class="symbol">&gt;</span></code><p>Deregister from updates from the given map service.</p>
</td>
</tr>
<tr>
<td>
<a href="get.html">get</a></td>
<td>
<code><span class="keyword">abstract</span> <span class="keyword">fun </span><span class="identifier">get</span><span class="symbol">(</span><span class="symbol">)</span><span class="symbol">: </span><span class="identifier">Collection</span><span class="symbol">&lt;</span><a href="../../core.node/-node-info/index.html"><span class="identifier">NodeInfo</span></a><span class="symbol">&gt;</span></code><p>Get a copy of all nodes in the map.</p>
<code><span class="keyword">abstract</span> <span class="keyword">fun </span><span class="identifier">get</span><span class="symbol">(</span><span class="identifier" id="core.node.subsystems.NetworkMapCache$get(core.node.services.ServiceType)/serviceType">serviceType</span><span class="symbol">:</span>&nbsp;<a href="../../core.node.services/-service-type/index.html"><span class="identifier">ServiceType</span></a><span class="symbol">)</span><span class="symbol">: </span><span class="identifier">Collection</span><span class="symbol">&lt;</span><a href="../../core.node/-node-info/index.html"><span class="identifier">NodeInfo</span></a><span class="symbol">&gt;</span></code><p>Get the collection of nodes which advertise a specific service.</p>
</td>
</tr>
<tr>
<td>
<a href="get-recommended.html">getRecommended</a></td>
<td>
<code><span class="keyword">abstract</span> <span class="keyword">fun </span><span class="identifier">getRecommended</span><span class="symbol">(</span><span class="identifier" id="core.node.subsystems.NetworkMapCache$getRecommended(core.node.services.ServiceType, core.Contract, kotlin.Array((core.Party)))/type">type</span><span class="symbol">:</span>&nbsp;<a href="../../core.node.services/-service-type/index.html"><span class="identifier">ServiceType</span></a><span class="symbol">, </span><span class="identifier" id="core.node.subsystems.NetworkMapCache$getRecommended(core.node.services.ServiceType, core.Contract, kotlin.Array((core.Party)))/contract">contract</span><span class="symbol">:</span>&nbsp;<a href="../../core/-contract/index.html"><span class="identifier">Contract</span></a><span class="symbol">, </span><span class="keyword">vararg</span> <span class="identifier" id="core.node.subsystems.NetworkMapCache$getRecommended(core.node.services.ServiceType, core.Contract, kotlin.Array((core.Party)))/party">party</span><span class="symbol">:</span>&nbsp;<a href="../../core/-party/index.html"><span class="identifier">Party</span></a><span class="symbol">)</span><span class="symbol">: </span><a href="../../core.node/-node-info/index.html"><span class="identifier">NodeInfo</span></a><span class="symbol">?</span></code><p>Get a recommended node that advertises a service, and is suitable for the specified contract and parties.
Implementations might understand, for example, the correct regulator to use for specific contracts/parties,
or the appropriate oracle for a contract.</p>
</td>
</tr>
<tr>
<td>
<a href="node-for-party-name.html">nodeForPartyName</a></td>
<td>
<code><span class="keyword">open</span> <span class="keyword">fun </span><span class="identifier">nodeForPartyName</span><span class="symbol">(</span><span class="identifier" id="core.node.subsystems.NetworkMapCache$nodeForPartyName(kotlin.String)/name">name</span><span class="symbol">:</span>&nbsp;<span class="identifier">String</span><span class="symbol">)</span><span class="symbol">: </span><a href="../../core.node/-node-info/index.html"><span class="identifier">NodeInfo</span></a><span class="symbol">?</span></code><p>Look up the node info for a party.</p>
</td>
</tr>
<tr>
<td>
<a href="remove-node.html">removeNode</a></td>
<td>
<code><span class="keyword">abstract</span> <span class="keyword">fun </span><span class="identifier">removeNode</span><span class="symbol">(</span><span class="identifier" id="core.node.subsystems.NetworkMapCache$removeNode(core.node.NodeInfo)/node">node</span><span class="symbol">:</span>&nbsp;<a href="../../core.node/-node-info/index.html"><span class="identifier">NodeInfo</span></a><span class="symbol">)</span><span class="symbol">: </span><span class="identifier">Unit</span></code><p>Removes a node from the local cache</p>
</td>
</tr>
</tbody>
</table>
<h3>Companion Object Properties</h3>
<table>
<tbody>
<tr>
<td>
<a href="logger.html">logger</a></td>
<td>
<code><span class="keyword">val </span><span class="identifier">logger</span><span class="symbol">: </span><span class="identifier">&lt;ERROR CLASS&gt;</span></code></td>
</tr>
</tbody>
</table>
<h3>Inheritors</h3>
<table>
<tbody>
<tr>
<td>
<a href="../-in-memory-network-map-cache/index.html">InMemoryNetworkMapCache</a></td>
<td>
<code><span class="keyword">open</span> <span class="keyword">class </span><span class="identifier">InMemoryNetworkMapCache</span>&nbsp;<span class="symbol">:</span>&nbsp;<span class="identifier">NetworkMapCache</span></code><p>Extremely simple in-memory cache of the network map.</p>
</td>
</tr>
</tbody>
</table>
</BODY>
</HTML>
