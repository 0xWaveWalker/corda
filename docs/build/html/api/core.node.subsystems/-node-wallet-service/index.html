<HTML>
<HEAD>
<title>NodeWalletService - </title>
<link rel="stylesheet" href="../../style.css">
</HEAD>
<BODY>
<a href="../index.html">core.node.subsystems</a>&nbsp;/&nbsp;<a href=".">NodeWalletService</a><br/>
<br/>
<h1>NodeWalletService</h1>
<code><span class="keyword">class </span><span class="identifier">NodeWalletService</span>&nbsp;<span class="symbol">:</span>&nbsp;<a href="../-wallet-service/index.html"><span class="identifier">WalletService</span></a></code><br/>
<p>This class implements a simple, in memory wallet that tracks states that are owned by us, and also has a convenience
method to auto-generate some self-issued cash states that can be used for test trading. A real wallet would persist
states relevant to us into a database and once such a wallet is implemented, this scaffolding can be removed.</p>
<br/>
<br/>
<h3>Constructors</h3>
<table>
<tbody>
<tr>
<td>
<a href="-init-.html">&lt;init&gt;</a></td>
<td>
<code><span class="identifier">NodeWalletService</span><span class="symbol">(</span><span class="identifier" id="core.node.subsystems.NodeWalletService$<init>(core.node.ServiceHub)/services">services</span><span class="symbol">:</span>&nbsp;<a href="../../core.node/-service-hub/index.html"><span class="identifier">ServiceHub</span></a><span class="symbol">)</span></code><p>This class implements a simple, in memory wallet that tracks states that are owned by us, and also has a convenience
method to auto-generate some self-issued cash states that can be used for test trading. A real wallet would persist
states relevant to us into a database and once such a wallet is implemented, this scaffolding can be removed.</p>
</td>
</tr>
</tbody>
</table>
<h3>Properties</h3>
<table>
<tbody>
<tr>
<td>
<a href="cash-balances.html">cashBalances</a></td>
<td>
<code><span class="keyword">val </span><span class="identifier">cashBalances</span><span class="symbol">: </span><span class="identifier">Map</span><span class="symbol">&lt;</span><a href="http://docs.oracle.com/javase/6/docs/api/java/util/Currency.html"><span class="identifier">Currency</span></a><span class="symbol">,</span>&nbsp;<a href="../../core/-amount/index.html"><span class="identifier">Amount</span></a><span class="symbol">&gt;</span></code><p>Returns a snapshot of how much cash we have in each currency, ignoring details like issuer. Note: currencies for
which we have no cash evaluate to null, not 0.</p>
</td>
</tr>
<tr>
<td>
<a href="current-wallet.html">currentWallet</a></td>
<td>
<code><span class="keyword">val </span><span class="identifier">currentWallet</span><span class="symbol">: </span><a href="../-wallet/index.html"><span class="identifier">Wallet</span></a></code><p>Returns a read-only snapshot of the wallet at the time the call is made. Note that if you consume states or
keys in this wallet, you must inform the wallet service so it can update its internal state.</p>
</td>
</tr>
<tr>
<td>
<a href="linear-heads.html">linearHeads</a></td>
<td>
<code><span class="keyword">val </span><span class="identifier">linearHeads</span><span class="symbol">: </span><span class="identifier">Map</span><span class="symbol">&lt;</span><a href="../../core.crypto/-secure-hash/index.html"><span class="identifier">SecureHash</span></a><span class="symbol">,</span>&nbsp;<a href="../../core/-state-and-ref/index.html"><span class="identifier">StateAndRef</span></a><span class="symbol">&lt;</span><a href="../../core/-linear-state/index.html"><span class="identifier">LinearState</span></a><span class="symbol">&gt;</span><span class="symbol">&gt;</span></code><p>Returns a snapshot of the heads of LinearStates</p>
</td>
</tr>
</tbody>
</table>
<h3>Functions</h3>
<table>
<tbody>
<tr>
<td>
<a href="fill-with-some-test-cash.html">fillWithSomeTestCash</a></td>
<td>
<code><span class="keyword">fun </span><span class="identifier">fillWithSomeTestCash</span><span class="symbol">(</span><span class="identifier" id="core.node.subsystems.NodeWalletService$fillWithSomeTestCash(core.Amount, kotlin.Int, kotlin.Int, java.util.Random)/howMuch">howMuch</span><span class="symbol">:</span>&nbsp;<a href="../../core/-amount/index.html"><span class="identifier">Amount</span></a><span class="symbol">, </span><span class="identifier" id="core.node.subsystems.NodeWalletService$fillWithSomeTestCash(core.Amount, kotlin.Int, kotlin.Int, java.util.Random)/atLeastThisManyStates">atLeastThisManyStates</span><span class="symbol">:</span>&nbsp;<span class="identifier">Int</span>&nbsp;<span class="symbol">=</span>&nbsp;3<span class="symbol">, </span><span class="identifier" id="core.node.subsystems.NodeWalletService$fillWithSomeTestCash(core.Amount, kotlin.Int, kotlin.Int, java.util.Random)/atMostThisManyStates">atMostThisManyStates</span><span class="symbol">:</span>&nbsp;<span class="identifier">Int</span>&nbsp;<span class="symbol">=</span>&nbsp;10<span class="symbol">, </span><span class="identifier" id="core.node.subsystems.NodeWalletService$fillWithSomeTestCash(core.Amount, kotlin.Int, kotlin.Int, java.util.Random)/rng">rng</span><span class="symbol">:</span>&nbsp;<a href="http://docs.oracle.com/javase/6/docs/api/java/util/Random.html"><span class="identifier">Random</span></a>&nbsp;<span class="symbol">=</span>&nbsp;Random()<span class="symbol">)</span><span class="symbol">: </span><span class="identifier">Unit</span></code><p>Creates a random set of between (by default) 3 and 10 cash states that add up to the given amount and adds them
to the wallet.</p>
</td>
</tr>
<tr>
<td>
<a href="notify-all.html">notifyAll</a></td>
<td>
<code><span class="keyword">fun </span><span class="identifier">notifyAll</span><span class="symbol">(</span><span class="identifier" id="core.node.subsystems.NodeWalletService$notifyAll(kotlin.collections.Iterable((core.WireTransaction)))/txns">txns</span><span class="symbol">:</span>&nbsp;<span class="identifier">Iterable</span><span class="symbol">&lt;</span><a href="../../core/-wire-transaction/index.html"><span class="identifier">WireTransaction</span></a><span class="symbol">&gt;</span><span class="symbol">)</span><span class="symbol">: </span><a href="../-wallet/index.html"><span class="identifier">Wallet</span></a></code><p>Possibly update the wallet by marking as spent states that these transactions consume, and adding any relevant
new states that they create. You should only insert transactions that have been successfully verified here</p>
</td>
</tr>
</tbody>
</table>
<h3>Inherited Functions</h3>
<table>
<tbody>
<tr>
<td>
<a href="../-wallet-service/linear-heads-of-type_.html">linearHeadsOfType_</a></td>
<td>
<code><span class="keyword">open</span> <span class="keyword">fun </span><span class="symbol">&lt;</span><span class="identifier">T</span>&nbsp;<span class="symbol">:</span>&nbsp;<a href="../../core/-linear-state/index.html"><span class="identifier">LinearState</span></a><span class="symbol">&gt;</span> <span class="identifier">linearHeadsOfType_</span><span class="symbol">(</span><span class="identifier" id="core.node.subsystems.WalletService$linearHeadsOfType_(java.lang.Class((core.node.subsystems.WalletService.linearHeadsOfType_.T)))/stateType">stateType</span><span class="symbol">:</span>&nbsp;<a href="http://docs.oracle.com/javase/6/docs/api/java/lang/Class.html"><span class="identifier">Class</span></a><span class="symbol">&lt;</span><span class="identifier">T</span><span class="symbol">&gt;</span><span class="symbol">)</span><span class="symbol">: </span><span class="identifier">Map</span><span class="symbol">&lt;</span><a href="../../core.crypto/-secure-hash/index.html"><span class="identifier">SecureHash</span></a><span class="symbol">,</span>&nbsp;<a href="../../core/-state-and-ref/index.html"><span class="identifier">StateAndRef</span></a><span class="symbol">&lt;</span><span class="identifier">T</span><span class="symbol">&gt;</span><span class="symbol">&gt;</span></code><p>Returns the <a href="../-wallet-service/linear-heads.html">linearHeads</a> only when the type of the state would be considered an instanceof the given type.</p>
</td>
</tr>
<tr>
<td>
<a href="../-wallet-service/notify.html">notify</a></td>
<td>
<code><span class="keyword">open</span> <span class="keyword">fun </span><span class="identifier">notify</span><span class="symbol">(</span><span class="identifier" id="core.node.subsystems.WalletService$notify(core.WireTransaction)/tx">tx</span><span class="symbol">:</span>&nbsp;<a href="../../core/-wire-transaction/index.html"><span class="identifier">WireTransaction</span></a><span class="symbol">)</span><span class="symbol">: </span><a href="../-wallet/index.html"><span class="identifier">Wallet</span></a></code><p>Same as notifyAll but with a single transaction.</p>
</td>
</tr>
<tr>
<td>
<a href="../-wallet-service/states-for-refs.html">statesForRefs</a></td>
<td>
<code><span class="keyword">open</span> <span class="keyword">fun </span><span class="identifier">statesForRefs</span><span class="symbol">(</span><span class="identifier" id="core.node.subsystems.WalletService$statesForRefs(kotlin.collections.List((core.StateRef)))/refs">refs</span><span class="symbol">:</span>&nbsp;<span class="identifier">List</span><span class="symbol">&lt;</span><a href="../../core/-state-ref/index.html"><span class="identifier">StateRef</span></a><span class="symbol">&gt;</span><span class="symbol">)</span><span class="symbol">: </span><span class="identifier">Map</span><span class="symbol">&lt;</span><a href="../../core/-state-ref/index.html"><span class="identifier">StateRef</span></a><span class="symbol">,</span>&nbsp;<a href="../../core/-contract-state/index.html"><span class="identifier">ContractState</span></a><span class="symbol">?</span><span class="symbol">&gt;</span></code></td>
</tr>
</tbody>
</table>
<h3>Extension Functions</h3>
<table>
<tbody>
<tr>
<td>
<a href="../linear-heads-of-type.html">linearHeadsOfType</a></td>
<td>
<code><span class="keyword">fun </span><span class="symbol">&lt;</span><span class="identifier">T</span>&nbsp;<span class="symbol">:</span>&nbsp;<a href="../../core/-linear-state/index.html"><span class="identifier">LinearState</span></a><span class="symbol">&gt;</span> <a href="../-wallet-service/index.html"><span class="identifier">WalletService</span></a><span class="symbol">.</span><span class="identifier">linearHeadsOfType</span><span class="symbol">(</span><span class="symbol">)</span><span class="symbol">: </span><span class="identifier">&lt;ERROR CLASS&gt;</span></code></td>
</tr>
</tbody>
</table>
</BODY>
</HTML>
