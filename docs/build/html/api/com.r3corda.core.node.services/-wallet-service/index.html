<HTML>
<HEAD>
<title>WalletService - </title>
<link rel="stylesheet" href="../../style.css">
</HEAD>
<BODY>
<a href="../index.html">com.r3corda.core.node.services</a>&nbsp;/&nbsp;<a href=".">WalletService</a><br/>
<br/>
<h1>WalletService</h1>
<code><span class="keyword">interface </span><span class="identifier">WalletService</span></code><br/>
<p>A WalletService is responsible for securely and safely persisting the current state of a wallet to storage. The
wallet service vends immutable snapshots of the current wallet for working with: if you build a transaction based
on a wallet that isnt current, be aware that it may end up being invalid if the states that were used have been
consumed by someone else first</p>
<br/>
<br/>
<h3>Properties</h3>
<table>
<tbody>
<tr>
<td>
<a href="current-wallet.html">currentWallet</a></td>
<td>
<code><span class="keyword">abstract</span> <span class="keyword">val </span><span class="identifier">currentWallet</span><span class="symbol">: </span><a href="../-wallet/index.html"><span class="identifier">Wallet</span></a></code><p>Returns a read-only snapshot of the wallet at the time the call is made. Note that if you consume states or
keys in this wallet, you must inform the wallet service so it can update its internal state.</p>
</td>
</tr>
<tr>
<td>
<a href="linear-heads.html">linearHeads</a></td>
<td>
<code><span class="keyword">abstract</span> <span class="keyword">val </span><span class="identifier">linearHeads</span><span class="symbol">: </span><span class="identifier">Map</span><span class="symbol">&lt;</span><a href="../../com.r3corda.core.crypto/-secure-hash/index.html"><span class="identifier">SecureHash</span></a><span class="symbol">,</span>&nbsp;<a href="../../com.r3corda.core.contracts/-state-and-ref/index.html"><span class="identifier">StateAndRef</span></a><span class="symbol">&lt;</span><a href="../../com.r3corda.core.contracts/-linear-state/index.html"><span class="identifier">LinearState</span></a><span class="symbol">&gt;</span><span class="symbol">&gt;</span></code><p>Returns a snapshot of the heads of LinearStates.</p>
</td>
</tr>
<tr>
<td>
<a href="updates.html">updates</a></td>
<td>
<code><span class="keyword">abstract</span> <span class="keyword">val </span><span class="identifier">updates</span><span class="symbol">: </span><span class="identifier">&lt;ERROR CLASS&gt;</span><span class="symbol">&lt;</span><a href="../-wallet/-update/index.html"><span class="identifier">Update</span></a><span class="symbol">&gt;</span></code><p>Get a synchronous Observable of updates.  When observations are pushed to the Observer, the Wallet will already incorporate
the update.</p>
</td>
</tr>
</tbody>
</table>
<h3>Functions</h3>
<table>
<tbody>
<tr>
<td>
<a href="linear-heads-of-type_.html">linearHeadsOfType_</a></td>
<td>
<code><span class="keyword">open</span> <span class="keyword">fun </span><span class="symbol">&lt;</span><span class="identifier">T</span>&nbsp;<span class="symbol">:</span>&nbsp;<a href="../../com.r3corda.core.contracts/-linear-state/index.html"><span class="identifier">LinearState</span></a><span class="symbol">&gt;</span> <span class="identifier">linearHeadsOfType_</span><span class="symbol">(</span><span class="identifier" id="com.r3corda.core.node.services.WalletService$linearHeadsOfType_(java.lang.Class((com.r3corda.core.node.services.WalletService.linearHeadsOfType_.T)))/stateType">stateType</span><span class="symbol">:</span>&nbsp;<a href="http://docs.oracle.com/javase/6/docs/api/java/lang/Class.html"><span class="identifier">Class</span></a><span class="symbol">&lt;</span><span class="identifier">T</span><span class="symbol">&gt;</span><span class="symbol">)</span><span class="symbol">: </span><span class="identifier">Map</span><span class="symbol">&lt;</span><a href="../../com.r3corda.core.crypto/-secure-hash/index.html"><span class="identifier">SecureHash</span></a><span class="symbol">,</span>&nbsp;<a href="../../com.r3corda.core.contracts/-state-and-ref/index.html"><span class="identifier">StateAndRef</span></a><span class="symbol">&lt;</span><span class="identifier">T</span><span class="symbol">&gt;</span><span class="symbol">&gt;</span></code><p>Returns the <a href="linear-heads.html">linearHeads</a> only when the type of the state would be considered an instanceof the given type.</p>
</td>
</tr>
<tr>
<td>
<a href="notify.html">notify</a></td>
<td>
<code><span class="keyword">open</span> <span class="keyword">fun </span><span class="identifier">notify</span><span class="symbol">(</span><span class="identifier" id="com.r3corda.core.node.services.WalletService$notify(com.r3corda.core.contracts.WireTransaction)/tx">tx</span><span class="symbol">:</span>&nbsp;<a href="../../com.r3corda.core.contracts/-wire-transaction/index.html"><span class="identifier">WireTransaction</span></a><span class="symbol">)</span><span class="symbol">: </span><a href="../-wallet/index.html"><span class="identifier">Wallet</span></a></code><p>Same as notifyAll but with a single transaction.</p>
</td>
</tr>
<tr>
<td>
<a href="notify-all.html">notifyAll</a></td>
<td>
<code><span class="keyword">abstract</span> <span class="keyword">fun </span><span class="identifier">notifyAll</span><span class="symbol">(</span><span class="identifier" id="com.r3corda.core.node.services.WalletService$notifyAll(kotlin.collections.Iterable((com.r3corda.core.contracts.WireTransaction)))/txns">txns</span><span class="symbol">:</span>&nbsp;<span class="identifier">Iterable</span><span class="symbol">&lt;</span><a href="../../com.r3corda.core.contracts/-wire-transaction/index.html"><span class="identifier">WireTransaction</span></a><span class="symbol">&gt;</span><span class="symbol">)</span><span class="symbol">: </span><a href="../-wallet/index.html"><span class="identifier">Wallet</span></a></code><p>Possibly update the wallet by marking as spent states that these transactions consume, and adding any relevant
new states that they create. You should only insert transactions that have been successfully verified here</p>
</td>
</tr>
<tr>
<td>
<a href="states-for-refs.html">statesForRefs</a></td>
<td>
<code><span class="keyword">open</span> <span class="keyword">fun </span><span class="identifier">statesForRefs</span><span class="symbol">(</span><span class="identifier" id="com.r3corda.core.node.services.WalletService$statesForRefs(kotlin.collections.List((com.r3corda.core.contracts.StateRef)))/refs">refs</span><span class="symbol">:</span>&nbsp;<span class="identifier">List</span><span class="symbol">&lt;</span><a href="../../com.r3corda.core.contracts/-state-ref/index.html"><span class="identifier">StateRef</span></a><span class="symbol">&gt;</span><span class="symbol">)</span><span class="symbol">: </span><span class="identifier">Map</span><span class="symbol">&lt;</span><a href="../../com.r3corda.core.contracts/-state-ref/index.html"><span class="identifier">StateRef</span></a><span class="symbol">,</span>&nbsp;<a href="../../com.r3corda.core.contracts/-transaction-state/index.html"><span class="identifier">TransactionState</span></a><span class="symbol">&lt;</span><span class="identifier">*</span><span class="symbol">&gt;</span><span class="symbol">?</span><span class="symbol">&gt;</span></code></td>
</tr>
<tr>
<td>
<a href="when-consumed.html">whenConsumed</a></td>
<td>
<code><span class="keyword">open</span> <span class="keyword">fun </span><span class="identifier">whenConsumed</span><span class="symbol">(</span><span class="identifier" id="com.r3corda.core.node.services.WalletService$whenConsumed(com.r3corda.core.contracts.StateRef)/ref">ref</span><span class="symbol">:</span>&nbsp;<a href="../../com.r3corda.core.contracts/-state-ref/index.html"><span class="identifier">StateRef</span></a><span class="symbol">)</span><span class="symbol">: </span><span class="identifier">&lt;ERROR CLASS&gt;</span><span class="symbol">&lt;</span><a href="../-wallet/-update/index.html"><span class="identifier">Update</span></a><span class="symbol">&gt;</span></code><p>Provide a <a href="#">Future</a> for when a <a href="../../com.r3corda.core.contracts/-state-ref/index.html">StateRef</a> is consumed, which can be very useful in building tests.</p>
</td>
</tr>
</tbody>
</table>
<h3>Extension Functions</h3>
<table>
<tbody>
<tr>
<td>
<a href="../linear-heads-of-type.html">linearHeadsOfType</a></td>
<td>
<code><span class="keyword">fun </span><span class="symbol">&lt;</span><span class="identifier">T</span>&nbsp;<span class="symbol">:</span>&nbsp;<a href="../../com.r3corda.core.contracts/-linear-state/index.html"><span class="identifier">LinearState</span></a><span class="symbol">&gt;</span> <span class="identifier">WalletService</span><span class="symbol">.</span><span class="identifier">linearHeadsOfType</span><span class="symbol">(</span><span class="symbol">)</span><span class="symbol">: </span><span class="identifier">&lt;ERROR CLASS&gt;</span></code></td>
</tr>
</tbody>
</table>
<h3>Inheritors</h3>
<table>
<tbody>
<tr>
<td>
<a href="../../com.r3corda.core.testing/-in-memory-wallet-service/index.html">InMemoryWalletService</a></td>
<td>
<code><span class="keyword">open</span> <span class="keyword">class </span><span class="identifier">InMemoryWalletService</span>&nbsp;<span class="symbol">:</span>&nbsp;<a href="../../com.r3corda.core.serialization/-singleton-serialize-as-token/index.html"><span class="identifier">SingletonSerializeAsToken</span></a><span class="symbol">, </span><span class="identifier">WalletService</span></code><p>This class implements a simple, in memory wallet that tracks states that are owned by us, and also has a convenience
method to auto-generate some self-issued cash states that can be used for test trading. A real wallet would persist
states relevant to us into a database and once such a wallet is implemented, this scaffolding can be removed.</p>
</td>
</tr>
</tbody>
</table>
</BODY>
</HTML>
