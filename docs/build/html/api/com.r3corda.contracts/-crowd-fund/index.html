<HTML>
<HEAD>
<title>CrowdFund - </title>
<link rel="stylesheet" href="../../style.css">
</HEAD>
<BODY>
<a href="../index.html">com.r3corda.contracts</a>&nbsp;/&nbsp;<a href=".">CrowdFund</a><br/>
<br/>
<h1>CrowdFund</h1>
<code><span class="keyword">class </span><span class="identifier">CrowdFund</span>&nbsp;<span class="symbol">:</span>&nbsp;<a href="../../com.r3corda.core.contracts/-contract/index.html"><span class="identifier">Contract</span></a></code><br/>
<p>This is a basic crowd funding contract. It allows a party to create a funding opportunity, then for others to
pledge during the funding period , and then for the party to either accept the funding (if the target has been reached)
return the funds to the pledge-makers (if the target has not been reached).</p>
Discussion<p>This method of modelling a crowdfund is similar to how itd be done in Ethereum. The state is essentially a database
in which transactions evolve it over time. The state transition model we are using here though means its possible
to do it in a different approach, with some additional (not yet implemented) extensions to the model. In the UTXO
model you can do something more like the Lighthouse application (https://www.vinumeris.com/lighthouse) in which
the campaign data and peoples pledges are transmitted out of band, with a pledge being a partially signed
transaction which is valid only when merged with other transactions. The pledges can then be combined by the project
owner at the point at which sufficient amounts of money have been gathered, and this creates a valid transaction
that claims the money.</p>
<p>TODO: Prototype this second variant of crowdfunding once the core model has been sufficiently extended.
TODO: Experiment with the use of the javax.validation API to simplify the validation logic by annotating state members.</p>
<p>See JIRA bug PD-21 for further discussion and followup.</p>
<br/>
<br/>
<p><strong>Author</strong><br/>
James Carlyle</p>
<br/>
<br/>
<h3>Types</h3>
<table>
<tbody>
<tr>
<td>
<a href="-campaign/index.html">Campaign</a></td>
<td>
<code><span class="keyword">data</span> <span class="keyword">class </span><span class="identifier">Campaign</span></code></td>
</tr>
<tr>
<td>
<a href="-commands/index.html">Commands</a></td>
<td>
<code><span class="keyword">interface </span><span class="identifier">Commands</span>&nbsp;<span class="symbol">:</span>&nbsp;<a href="../../com.r3corda.core.contracts/-command-data.html"><span class="identifier">CommandData</span></a></code></td>
</tr>
<tr>
<td>
<a href="-pledge/index.html">Pledge</a></td>
<td>
<code><span class="keyword">data</span> <span class="keyword">class </span><span class="identifier">Pledge</span></code></td>
</tr>
<tr>
<td>
<a href="-state/index.html">State</a></td>
<td>
<code><span class="keyword">data</span> <span class="keyword">class </span><span class="identifier">State</span>&nbsp;<span class="symbol">:</span>&nbsp;<a href="../../com.r3corda.core.contracts/-contract-state/index.html"><span class="identifier">ContractState</span></a></code></td>
</tr>
</tbody>
</table>
<h3>Constructors</h3>
<table>
<tbody>
<tr>
<td>
<a href="-init-.html">&lt;init&gt;</a></td>
<td>
<code><span class="identifier">CrowdFund</span><span class="symbol">(</span><span class="symbol">)</span></code><p>This is a basic crowd funding contract. It allows a party to create a funding opportunity, then for others to
pledge during the funding period , and then for the party to either accept the funding (if the target has been reached)
return the funds to the pledge-makers (if the target has not been reached).</p>
</td>
</tr>
</tbody>
</table>
<h3>Properties</h3>
<table>
<tbody>
<tr>
<td>
<a href="legal-contract-reference.html">legalContractReference</a></td>
<td>
<code><span class="keyword">val </span><span class="identifier">legalContractReference</span><span class="symbol">: </span><a href="../../com.r3corda.core.crypto/-secure-hash/index.html"><span class="identifier">SecureHash</span></a></code><p>Unparsed reference to the natural language contract that this code is supposed to express (usually a hash of
the contracts contents).</p>
</td>
</tr>
</tbody>
</table>
<h3>Functions</h3>
<table>
<tbody>
<tr>
<td>
<a href="generate-close.html">generateClose</a></td>
<td>
<code><span class="keyword">fun </span><span class="identifier">generateClose</span><span class="symbol">(</span><span class="identifier" id="com.r3corda.contracts.CrowdFund$generateClose(com.r3corda.core.contracts.TransactionBuilder, com.r3corda.core.contracts.StateAndRef((com.r3corda.contracts.CrowdFund.State)), kotlin.collections.List((com.r3corda.core.contracts.StateAndRef((com.r3corda.contracts.Cash.State)))))/tx">tx</span><span class="symbol">:</span>&nbsp;<a href="../../com.r3corda.core.contracts/-transaction-builder/index.html"><span class="identifier">TransactionBuilder</span></a><span class="symbol">, </span><span class="identifier" id="com.r3corda.contracts.CrowdFund$generateClose(com.r3corda.core.contracts.TransactionBuilder, com.r3corda.core.contracts.StateAndRef((com.r3corda.contracts.CrowdFund.State)), kotlin.collections.List((com.r3corda.core.contracts.StateAndRef((com.r3corda.contracts.Cash.State)))))/campaign">campaign</span><span class="symbol">:</span>&nbsp;<a href="../../com.r3corda.core.contracts/-state-and-ref/index.html"><span class="identifier">StateAndRef</span></a><span class="symbol">&lt;</span><a href="-state/index.html"><span class="identifier">State</span></a><span class="symbol">&gt;</span><span class="symbol">, </span><span class="identifier" id="com.r3corda.contracts.CrowdFund$generateClose(com.r3corda.core.contracts.TransactionBuilder, com.r3corda.core.contracts.StateAndRef((com.r3corda.contracts.CrowdFund.State)), kotlin.collections.List((com.r3corda.core.contracts.StateAndRef((com.r3corda.contracts.Cash.State)))))/wallet">wallet</span><span class="symbol">:</span>&nbsp;<span class="identifier">List</span><span class="symbol">&lt;</span><a href="../../com.r3corda.core.contracts/-state-and-ref/index.html"><span class="identifier">StateAndRef</span></a><span class="symbol">&lt;</span><a href="../-cash/-state/index.html"><span class="identifier">State</span></a><span class="symbol">&gt;</span><span class="symbol">&gt;</span><span class="symbol">)</span><span class="symbol">: </span><span class="identifier">Unit</span></code></td>
</tr>
<tr>
<td>
<a href="generate-pledge.html">generatePledge</a></td>
<td>
<code><span class="keyword">fun </span><span class="identifier">generatePledge</span><span class="symbol">(</span><span class="identifier" id="com.r3corda.contracts.CrowdFund$generatePledge(com.r3corda.core.contracts.TransactionBuilder, com.r3corda.core.contracts.StateAndRef((com.r3corda.contracts.CrowdFund.State)), java.security.PublicKey)/tx">tx</span><span class="symbol">:</span>&nbsp;<a href="../../com.r3corda.core.contracts/-transaction-builder/index.html"><span class="identifier">TransactionBuilder</span></a><span class="symbol">, </span><span class="identifier" id="com.r3corda.contracts.CrowdFund$generatePledge(com.r3corda.core.contracts.TransactionBuilder, com.r3corda.core.contracts.StateAndRef((com.r3corda.contracts.CrowdFund.State)), java.security.PublicKey)/campaign">campaign</span><span class="symbol">:</span>&nbsp;<a href="../../com.r3corda.core.contracts/-state-and-ref/index.html"><span class="identifier">StateAndRef</span></a><span class="symbol">&lt;</span><a href="-state/index.html"><span class="identifier">State</span></a><span class="symbol">&gt;</span><span class="symbol">, </span><span class="identifier" id="com.r3corda.contracts.CrowdFund$generatePledge(com.r3corda.core.contracts.TransactionBuilder, com.r3corda.core.contracts.StateAndRef((com.r3corda.contracts.CrowdFund.State)), java.security.PublicKey)/subscriber">subscriber</span><span class="symbol">:</span>&nbsp;<a href="http://docs.oracle.com/javase/6/docs/api/java/security/PublicKey.html"><span class="identifier">PublicKey</span></a><span class="symbol">)</span><span class="symbol">: </span><span class="identifier">Unit</span></code><p>Updates the given partial transaction with an input/output/command to fund the opportunity.</p>
</td>
</tr>
<tr>
<td>
<a href="generate-register.html">generateRegister</a></td>
<td>
<code><span class="keyword">fun </span><span class="identifier">generateRegister</span><span class="symbol">(</span><span class="identifier" id="com.r3corda.contracts.CrowdFund$generateRegister(com.r3corda.core.contracts.PartyAndReference, com.r3corda.core.contracts.Amount, kotlin.String, java.time.Instant, com.r3corda.core.crypto.Party)/owner">owner</span><span class="symbol">:</span>&nbsp;<a href="../../com.r3corda.core.contracts/-party-and-reference/index.html"><span class="identifier">PartyAndReference</span></a><span class="symbol">, </span><span class="identifier" id="com.r3corda.contracts.CrowdFund$generateRegister(com.r3corda.core.contracts.PartyAndReference, com.r3corda.core.contracts.Amount, kotlin.String, java.time.Instant, com.r3corda.core.crypto.Party)/fundingTarget">fundingTarget</span><span class="symbol">:</span>&nbsp;<a href="../../com.r3corda.core.contracts/-amount/index.html"><span class="identifier">Amount</span></a><span class="symbol">, </span><span class="identifier" id="com.r3corda.contracts.CrowdFund$generateRegister(com.r3corda.core.contracts.PartyAndReference, com.r3corda.core.contracts.Amount, kotlin.String, java.time.Instant, com.r3corda.core.crypto.Party)/fundingName">fundingName</span><span class="symbol">:</span>&nbsp;<span class="identifier">String</span><span class="symbol">, </span><span class="identifier" id="com.r3corda.contracts.CrowdFund$generateRegister(com.r3corda.core.contracts.PartyAndReference, com.r3corda.core.contracts.Amount, kotlin.String, java.time.Instant, com.r3corda.core.crypto.Party)/closingTime">closingTime</span><span class="symbol">:</span>&nbsp;<a href="http://docs.oracle.com/javase/6/docs/api/java/time/Instant.html"><span class="identifier">Instant</span></a><span class="symbol">, </span><span class="identifier" id="com.r3corda.contracts.CrowdFund$generateRegister(com.r3corda.core.contracts.PartyAndReference, com.r3corda.core.contracts.Amount, kotlin.String, java.time.Instant, com.r3corda.core.crypto.Party)/notary">notary</span><span class="symbol">:</span>&nbsp;<a href="../../com.r3corda.core.crypto/-party/index.html"><span class="identifier">Party</span></a><span class="symbol">)</span><span class="symbol">: </span><a href="../../com.r3corda.core.contracts/-transaction-builder/index.html"><span class="identifier">TransactionBuilder</span></a></code><p>Returns a transaction that registers a crowd-funding campaing, owned by the issuing institutions key. Does not update
an existing transaction because its not possible to register multiple campaigns in a single transaction</p>
</td>
</tr>
<tr>
<td>
<a href="verify.html">verify</a></td>
<td>
<code><span class="keyword">fun </span><span class="identifier">verify</span><span class="symbol">(</span><span class="identifier" id="com.r3corda.contracts.CrowdFund$verify(com.r3corda.core.contracts.TransactionForVerification)/tx">tx</span><span class="symbol">:</span>&nbsp;<a href="../../com.r3corda.core.contracts/-transaction-for-verification/index.html"><span class="identifier">TransactionForVerification</span></a><span class="symbol">)</span><span class="symbol">: </span><span class="identifier">Unit</span></code><p>Takes an object that represents a state transition, and ensures the inputs/outputs/commands make sense.
Must throw an exception if theres a problem that should prevent state transition. Takes a single object
rather than an argument so that additional data can be added without breaking binary compatibility with
existing contract code.</p>
</td>
</tr>
</tbody>
</table>
</BODY>
</HTML>
