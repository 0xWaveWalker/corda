<HTML>
<HEAD>
<title>RatesFixProtocol - </title>
<link rel="stylesheet" href="../../style.css">
</HEAD>
<BODY>
<a href="../index.html">protocols</a>&nbsp;/&nbsp;<a href=".">RatesFixProtocol</a><br/>
<br/>
<h1>RatesFixProtocol</h1>
<code><span class="keyword">open</span> <span class="keyword">class </span><span class="identifier">RatesFixProtocol</span>&nbsp;<span class="symbol">:</span>&nbsp;<a href="../../core.protocols/-protocol-logic/index.html"><span class="identifier">ProtocolLogic</span></a><span class="symbol">&lt;</span><span class="identifier">Unit</span><span class="symbol">&gt;</span></code><br/>
<p>This protocol queries the given oracle for an interest rate fix, and if it is within the given tolerance embeds the
fix in the transaction and then proceeds to get the oracle to sign it. Although the <a href="call.html">call</a> method combines the query
and signing step, you can run the steps individually by constructing this object and then using the public methods
for each step.</p>
<h3>Exceptions</h3>
<a name="FixOutOfRange"></a>
<code>FixOutOfRange</code> - if the returned fix was further away from the expected rate by the given amount.<br/>
<br/>
<br/>
<h3>Types</h3>
<table>
<tbody>
<tr>
<td>
<a href="-q-u-e-r-y-i-n-g/index.html">QUERYING</a></td>
<td>
<code><span class="keyword">class </span><span class="identifier">QUERYING</span>&nbsp;<span class="symbol">:</span>&nbsp;<a href="../../core.utilities/-progress-tracker/-step/index.html"><span class="identifier">Step</span></a></code></td>
</tr>
<tr>
<td>
<a href="-query-request/index.html">QueryRequest</a></td>
<td>
<code><span class="keyword">class </span><span class="identifier">QueryRequest</span>&nbsp;<span class="symbol">:</span>&nbsp;<a href="../-abstract-request-message/index.html"><span class="identifier">AbstractRequestMessage</span></a></code></td>
</tr>
<tr>
<td>
<a href="-s-i-g-n-i-n-g.html">SIGNING</a></td>
<td>
<code><span class="keyword">object </span><span class="identifier">SIGNING</span>&nbsp;<span class="symbol">:</span>&nbsp;<a href="../../core.utilities/-progress-tracker/-step/index.html"><span class="identifier">Step</span></a></code></td>
</tr>
<tr>
<td>
<a href="-sign-request/index.html">SignRequest</a></td>
<td>
<code><span class="keyword">class </span><span class="identifier">SignRequest</span>&nbsp;<span class="symbol">:</span>&nbsp;<a href="../-abstract-request-message/index.html"><span class="identifier">AbstractRequestMessage</span></a></code></td>
</tr>
<tr>
<td>
<a href="-w-o-r-k-i-n-g.html">WORKING</a></td>
<td>
<code><span class="keyword">object </span><span class="identifier">WORKING</span>&nbsp;<span class="symbol">:</span>&nbsp;<a href="../../core.utilities/-progress-tracker/-step/index.html"><span class="identifier">Step</span></a></code></td>
</tr>
</tbody>
</table>
<h3>Exceptions</h3>
<table>
<tbody>
<tr>
<td>
<a href="-fix-out-of-range/index.html">FixOutOfRange</a></td>
<td>
<code><span class="keyword">class </span><span class="identifier">FixOutOfRange</span>&nbsp;<span class="symbol">:</span>&nbsp;<a href="http://docs.oracle.com/javase/6/docs/api/java/lang/Exception.html"><span class="identifier">Exception</span></a></code></td>
</tr>
</tbody>
</table>
<h3>Constructors</h3>
<table>
<tbody>
<tr>
<td>
<a href="-init-.html">&lt;init&gt;</a></td>
<td>
<code><span class="identifier">RatesFixProtocol</span><span class="symbol">(</span><span class="identifier" id="protocols.RatesFixProtocol$<init>(core.TransactionBuilder, core.node.NodeInfo, core.FixOf, java.math.BigDecimal, java.math.BigDecimal, core.utilities.ProgressTracker)/tx">tx</span><span class="symbol">:</span>&nbsp;<a href="../../core/-transaction-builder/index.html"><span class="identifier">TransactionBuilder</span></a><span class="symbol">, </span><span class="identifier" id="protocols.RatesFixProtocol$<init>(core.TransactionBuilder, core.node.NodeInfo, core.FixOf, java.math.BigDecimal, java.math.BigDecimal, core.utilities.ProgressTracker)/oracle">oracle</span><span class="symbol">:</span>&nbsp;<a href="../../core.node/-node-info/index.html"><span class="identifier">NodeInfo</span></a><span class="symbol">, </span><span class="identifier" id="protocols.RatesFixProtocol$<init>(core.TransactionBuilder, core.node.NodeInfo, core.FixOf, java.math.BigDecimal, java.math.BigDecimal, core.utilities.ProgressTracker)/fixOf">fixOf</span><span class="symbol">:</span>&nbsp;<a href="../../core/-fix-of/index.html"><span class="identifier">FixOf</span></a><span class="symbol">, </span><span class="identifier" id="protocols.RatesFixProtocol$<init>(core.TransactionBuilder, core.node.NodeInfo, core.FixOf, java.math.BigDecimal, java.math.BigDecimal, core.utilities.ProgressTracker)/expectedRate">expectedRate</span><span class="symbol">:</span>&nbsp;<a href="http://docs.oracle.com/javase/6/docs/api/java/math/BigDecimal.html"><span class="identifier">BigDecimal</span></a><span class="symbol">, </span><span class="identifier" id="protocols.RatesFixProtocol$<init>(core.TransactionBuilder, core.node.NodeInfo, core.FixOf, java.math.BigDecimal, java.math.BigDecimal, core.utilities.ProgressTracker)/rateTolerance">rateTolerance</span><span class="symbol">:</span>&nbsp;<a href="http://docs.oracle.com/javase/6/docs/api/java/math/BigDecimal.html"><span class="identifier">BigDecimal</span></a><span class="symbol">, </span><span class="identifier" id="protocols.RatesFixProtocol$<init>(core.TransactionBuilder, core.node.NodeInfo, core.FixOf, java.math.BigDecimal, java.math.BigDecimal, core.utilities.ProgressTracker)/progressTracker">progressTracker</span><span class="symbol">:</span>&nbsp;<a href="../../core.utilities/-progress-tracker/index.html"><span class="identifier">ProgressTracker</span></a>&nbsp;<span class="symbol">=</span>&nbsp;RatesFixProtocol.tracker(fixOf.name)<span class="symbol">)</span></code><p>This protocol queries the given oracle for an interest rate fix, and if it is within the given tolerance embeds the
fix in the transaction and then proceeds to get the oracle to sign it. Although the <a href="call.html">call</a> method combines the query
and signing step, you can run the steps individually by constructing this object and then using the public methods
for each step.</p>
</td>
</tr>
</tbody>
</table>
<h3>Properties</h3>
<table>
<tbody>
<tr>
<td>
<a href="progress-tracker.html">progressTracker</a></td>
<td>
<code><span class="keyword">open</span> <span class="keyword">val </span><span class="identifier">progressTracker</span><span class="symbol">: </span><a href="../../core.utilities/-progress-tracker/index.html"><span class="identifier">ProgressTracker</span></a></code><p>Override this to provide a <a href="../../core.utilities/-progress-tracker/index.html">ProgressTracker</a>. If one is provided and stepped, the framework will do something
helpful with the progress reports. If this protocol is invoked as a sub-protocol of another, then the
tracker will be made a child of the current step in the parent. If its null, this protocol doesnt track
progress.</p>
</td>
</tr>
<tr>
<td>
<a href="tx.html">tx</a></td>
<td>
<code><span class="keyword">val </span><span class="identifier">tx</span><span class="symbol">: </span><a href="../../core/-transaction-builder/index.html"><span class="identifier">TransactionBuilder</span></a></code></td>
</tr>
</tbody>
</table>
<h3>Inherited Properties</h3>
<table>
<tbody>
<tr>
<td>
<a href="../../core.protocols/-protocol-logic/logger.html">logger</a></td>
<td>
<code><span class="keyword">val </span><span class="identifier">logger</span><span class="symbol">: </span><span class="identifier">&lt;ERROR CLASS&gt;</span></code><p>This is where you should log things to.</p>
</td>
</tr>
<tr>
<td>
<a href="../../core.protocols/-protocol-logic/psm.html">psm</a></td>
<td>
<code><span class="keyword">lateinit</span> <span class="keyword">var </span><span class="identifier">psm</span><span class="symbol">: </span><a href="../../core.protocols/-protocol-state-machine/index.html"><span class="identifier">ProtocolStateMachine</span></a><span class="symbol">&lt;</span><span class="identifier">*</span><span class="symbol">&gt;</span></code><p>Reference to the <a href="#">Fiber</a> instance that is the top level controller for the entire flow.</p>
</td>
</tr>
<tr>
<td>
<a href="../../core.protocols/-protocol-logic/service-hub.html">serviceHub</a></td>
<td>
<code><span class="keyword">val </span><span class="identifier">serviceHub</span><span class="symbol">: </span><a href="../../core.node/-service-hub/index.html"><span class="identifier">ServiceHub</span></a></code><p>Provides access to big, heavy classes that may be reconstructed from time to time, e.g. across restarts</p>
</td>
</tr>
</tbody>
</table>
<h3>Functions</h3>
<table>
<tbody>
<tr>
<td>
<a href="before-signing.html">beforeSigning</a></td>
<td>
<code><span class="keyword">open</span> <span class="keyword">fun </span><span class="identifier">beforeSigning</span><span class="symbol">(</span><span class="identifier" id="protocols.RatesFixProtocol$beforeSigning(core.Fix)/fix">fix</span><span class="symbol">:</span>&nbsp;<a href="../../core/-fix/index.html"><span class="identifier">Fix</span></a><span class="symbol">)</span><span class="symbol">: </span><span class="identifier">Unit</span></code><p>You can override this to perform any additional work needed after the fix is added to the transaction but
before its sent back to the oracle for signing (for example, adding output states that depend on the fix).</p>
</td>
</tr>
<tr>
<td>
<a href="call.html">call</a></td>
<td>
<code><span class="keyword">open</span> <span class="keyword">fun </span><span class="identifier">call</span><span class="symbol">(</span><span class="symbol">)</span><span class="symbol">: </span><span class="identifier">Unit</span></code><p>This is where you fill out your business logic.</p>
</td>
</tr>
<tr>
<td>
<a href="query.html">query</a></td>
<td>
<code><span class="keyword">fun </span><span class="identifier">query</span><span class="symbol">(</span><span class="symbol">)</span><span class="symbol">: </span><a href="../../core/-fix/index.html"><span class="identifier">Fix</span></a></code></td>
</tr>
<tr>
<td>
<a href="sign.html">sign</a></td>
<td>
<code><span class="keyword">fun </span><span class="identifier">sign</span><span class="symbol">(</span><span class="symbol">)</span><span class="symbol">: </span><a href="../../core.crypto/-digital-signature/-legally-identifiable/index.html"><span class="identifier">LegallyIdentifiable</span></a></code></td>
</tr>
</tbody>
</table>
<h3>Inherited Functions</h3>
<table>
<tbody>
<tr>
<td>
<a href="../../core.protocols/-protocol-logic/receive.html">receive</a></td>
<td>
<code><span class="keyword">fun </span><span class="symbol">&lt;</span><span class="identifier">T</span>&nbsp;<span class="symbol">:</span>&nbsp;<span class="identifier">Any</span><span class="symbol">&gt;</span> <span class="identifier">receive</span><span class="symbol">(</span><span class="identifier" id="core.protocols.ProtocolLogic$receive(kotlin.String, kotlin.Long)/topic">topic</span><span class="symbol">:</span>&nbsp;<span class="identifier">String</span><span class="symbol">, </span><span class="identifier" id="core.protocols.ProtocolLogic$receive(kotlin.String, kotlin.Long)/sessionIDForReceive">sessionIDForReceive</span><span class="symbol">:</span>&nbsp;<span class="identifier">Long</span><span class="symbol">)</span><span class="symbol">: </span><a href="../../core.utilities/-untrustworthy-data/index.html"><span class="identifier">UntrustworthyData</span></a><span class="symbol">&lt;</span><span class="identifier">T</span><span class="symbol">&gt;</span></code><br/>
<code><span class="keyword">fun </span><span class="symbol">&lt;</span><span class="identifier">T</span>&nbsp;<span class="symbol">:</span>&nbsp;<span class="identifier">Any</span><span class="symbol">&gt;</span> <span class="identifier">receive</span><span class="symbol">(</span><span class="identifier" id="core.protocols.ProtocolLogic$receive(kotlin.String, kotlin.Long, java.lang.Class((core.protocols.ProtocolLogic.receive.T)))/topic">topic</span><span class="symbol">:</span>&nbsp;<span class="identifier">String</span><span class="symbol">, </span><span class="identifier" id="core.protocols.ProtocolLogic$receive(kotlin.String, kotlin.Long, java.lang.Class((core.protocols.ProtocolLogic.receive.T)))/sessionIDForReceive">sessionIDForReceive</span><span class="symbol">:</span>&nbsp;<span class="identifier">Long</span><span class="symbol">, </span><span class="identifier" id="core.protocols.ProtocolLogic$receive(kotlin.String, kotlin.Long, java.lang.Class((core.protocols.ProtocolLogic.receive.T)))/clazz">clazz</span><span class="symbol">:</span>&nbsp;<a href="http://docs.oracle.com/javase/6/docs/api/java/lang/Class.html"><span class="identifier">Class</span></a><span class="symbol">&lt;</span><span class="identifier">T</span><span class="symbol">&gt;</span><span class="symbol">)</span><span class="symbol">: </span><a href="../../core.utilities/-untrustworthy-data/index.html"><span class="identifier">UntrustworthyData</span></a><span class="symbol">&lt;</span><span class="identifier">T</span><span class="symbol">&gt;</span></code></td>
</tr>
<tr>
<td>
<a href="../../core.protocols/-protocol-logic/send.html">send</a></td>
<td>
<code><span class="keyword">fun </span><span class="identifier">send</span><span class="symbol">(</span><span class="identifier" id="core.protocols.ProtocolLogic$send(kotlin.String, core.messaging.MessageRecipients, kotlin.Long, kotlin.Any)/topic">topic</span><span class="symbol">:</span>&nbsp;<span class="identifier">String</span><span class="symbol">, </span><span class="identifier" id="core.protocols.ProtocolLogic$send(kotlin.String, core.messaging.MessageRecipients, kotlin.Long, kotlin.Any)/destination">destination</span><span class="symbol">:</span>&nbsp;<a href="../../core.messaging/-message-recipients.html"><span class="identifier">MessageRecipients</span></a><span class="symbol">, </span><span class="identifier" id="core.protocols.ProtocolLogic$send(kotlin.String, core.messaging.MessageRecipients, kotlin.Long, kotlin.Any)/sessionID">sessionID</span><span class="symbol">:</span>&nbsp;<span class="identifier">Long</span><span class="symbol">, </span><span class="identifier" id="core.protocols.ProtocolLogic$send(kotlin.String, core.messaging.MessageRecipients, kotlin.Long, kotlin.Any)/obj">obj</span><span class="symbol">:</span>&nbsp;<span class="identifier">Any</span><span class="symbol">)</span><span class="symbol">: </span><span class="identifier">Unit</span></code></td>
</tr>
<tr>
<td>
<a href="../../core.protocols/-protocol-logic/send-and-receive.html">sendAndReceive</a></td>
<td>
<code><span class="keyword">fun </span><span class="symbol">&lt;</span><span class="identifier">T</span>&nbsp;<span class="symbol">:</span>&nbsp;<span class="identifier">Any</span><span class="symbol">&gt;</span> <span class="identifier">sendAndReceive</span><span class="symbol">(</span><span class="identifier" id="core.protocols.ProtocolLogic$sendAndReceive(kotlin.String, core.messaging.MessageRecipients, kotlin.Long, kotlin.Long, kotlin.Any)/topic">topic</span><span class="symbol">:</span>&nbsp;<span class="identifier">String</span><span class="symbol">, </span><span class="identifier" id="core.protocols.ProtocolLogic$sendAndReceive(kotlin.String, core.messaging.MessageRecipients, kotlin.Long, kotlin.Long, kotlin.Any)/destination">destination</span><span class="symbol">:</span>&nbsp;<a href="../../core.messaging/-message-recipients.html"><span class="identifier">MessageRecipients</span></a><span class="symbol">, </span><span class="identifier" id="core.protocols.ProtocolLogic$sendAndReceive(kotlin.String, core.messaging.MessageRecipients, kotlin.Long, kotlin.Long, kotlin.Any)/sessionIDForSend">sessionIDForSend</span><span class="symbol">:</span>&nbsp;<span class="identifier">Long</span><span class="symbol">, </span><span class="identifier" id="core.protocols.ProtocolLogic$sendAndReceive(kotlin.String, core.messaging.MessageRecipients, kotlin.Long, kotlin.Long, kotlin.Any)/sessionIDForReceive">sessionIDForReceive</span><span class="symbol">:</span>&nbsp;<span class="identifier">Long</span><span class="symbol">, </span><span class="identifier" id="core.protocols.ProtocolLogic$sendAndReceive(kotlin.String, core.messaging.MessageRecipients, kotlin.Long, kotlin.Long, kotlin.Any)/obj">obj</span><span class="symbol">:</span>&nbsp;<span class="identifier">Any</span><span class="symbol">)</span><span class="symbol">: </span><a href="../../core.utilities/-untrustworthy-data/index.html"><span class="identifier">UntrustworthyData</span></a><span class="symbol">&lt;</span><span class="identifier">T</span><span class="symbol">&gt;</span></code></td>
</tr>
<tr>
<td>
<a href="../../core.protocols/-protocol-logic/sub-protocol.html">subProtocol</a></td>
<td>
<code><span class="keyword">fun </span><span class="symbol">&lt;</span><span class="identifier">R</span><span class="symbol">&gt;</span> <span class="identifier">subProtocol</span><span class="symbol">(</span><span class="identifier" id="core.protocols.ProtocolLogic$subProtocol(core.protocols.ProtocolLogic((core.protocols.ProtocolLogic.subProtocol.R)))/subLogic">subLogic</span><span class="symbol">:</span>&nbsp;<a href="../../core.protocols/-protocol-logic/index.html"><span class="identifier">ProtocolLogic</span></a><span class="symbol">&lt;</span><span class="identifier">R</span><span class="symbol">&gt;</span><span class="symbol">)</span><span class="symbol">: </span><span class="identifier">R</span></code><p>Invokes the given subprotocol by simply passing through this <a href="../../core.protocols/-protocol-logic/index.html">ProtocolLogic</a>s reference to the
<a href="../../core.protocols/-protocol-state-machine/index.html">ProtocolStateMachine</a> and then calling the <a href="../../core.protocols/-protocol-logic/call.html">call</a> method.</p>
</td>
</tr>
</tbody>
</table>
<h3>Companion Object Properties</h3>
<table>
<tbody>
<tr>
<td>
<a href="-t-o-p-i-c.html">TOPIC</a></td>
<td>
<code><span class="keyword">val </span><span class="identifier">TOPIC</span><span class="symbol">: </span><span class="identifier">String</span></code></td>
</tr>
<tr>
<td>
<a href="-t-o-p-i-c_-q-u-e-r-y.html">TOPIC_QUERY</a></td>
<td>
<code><span class="keyword">val </span><span class="identifier">TOPIC_QUERY</span><span class="symbol">: </span><span class="identifier">String</span></code></td>
</tr>
<tr>
<td>
<a href="-t-o-p-i-c_-s-i-g-n.html">TOPIC_SIGN</a></td>
<td>
<code><span class="keyword">val </span><span class="identifier">TOPIC_SIGN</span><span class="symbol">: </span><span class="identifier">String</span></code></td>
</tr>
</tbody>
</table>
<h3>Companion Object Functions</h3>
<table>
<tbody>
<tr>
<td>
<a href="tracker.html">tracker</a></td>
<td>
<code><span class="keyword">fun </span><span class="identifier">tracker</span><span class="symbol">(</span><span class="identifier" id="protocols.RatesFixProtocol.Companion$tracker(kotlin.String)/fixName">fixName</span><span class="symbol">:</span>&nbsp;<span class="identifier">String</span><span class="symbol">)</span><span class="symbol">: </span><a href="../../core.utilities/-progress-tracker/index.html"><span class="identifier">ProgressTracker</span></a></code></td>
</tr>
</tbody>
</table>
</BODY>
</HTML>
